/*!
 * Cropper v3.1.6
 * https://github.com/fengyuanchen/cropper
 *
 * Copyright (c) 2014-2018 Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2018-03-01T13:33:48.179Z
 */
function upgradeCKEditor(){if("undefined"!=typeof CKEDITOR)for(var t in CKEDITOR.instances){var e=CKEDITOR.instances[t].name;CKEDITOR.instances[e].on("instanceReady",function(){CKEDITOR.instances[e].destroy(),CKEDITOR.replace(e,{baseHref:protocolAndHost+"/ckeditor/ckeditor-4.x/rel/",customConfig:"sfdc-config.js?t=4.5.3.3",height:"425",sfdcLabels:{CkeMediaEmbed:{title:"Embed Multimedia Content",description:"Use &lt;iframe&gt; code from DailyMotion, Vimeo, and Youtube.",subtitle:"Paste &amp;lt;iframe&amp;gt; code here:",exampleTitle:"Example:",example:"\n\n&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/KcOm0TNvKBA&quot; frameborder=&quot;0&quot; allowfullscreen&gt;&lt;/iframe&gt;\n\n",iframeMissing:"Invalid &lt;iframe&gt; element. Please use valid code from the approved sites."},sfdcSwitchToText:{sfdcSwitchToTextAlt:"Use plain text"},CkeImageDialog:{uploadTab:"Upload Image",infoTab_url:"URL",error:"Error:",uploadTab_desc_info:"Enter a description of the image for visually impaired users",uploadTab_desc:"Description",infoTab_url_info:"Example: http://www.mysite.com/myimage.jpg",btn_insert:"Insert",defaultImageDescription:"User-added image",missingUrlError:"You must enter a URL",uploadTab_file:"Select Image",infoTab_desc:"Description",btn_upadte:"Update",wrongFileTypeError:"You can insert only .gif .jpeg and .png files.",btn_update_tooltip:"Update Image",infoTab:"Web Address",btn_insert_tooltip:"Insert Image",title:"Insert Image",infoTab_desc_info:"Enter a description of the image for visually impaired users",imageUploadLimit_info:"Max number of upload images exceeded",uploadTab_file_info:"Maximum size 1 MB. Only png, gif or jpeg",btn_update:"Update"},CkeImagePaste:{CkeImagePasteWarning:"Pasting an image is not working properly with Firefox, please use [Copy Image location] instead."}},disableNativeSpellChecker:!0,language:"en-us",sharedSpaces:{top:"cke_topSpace",bottom:" cke_bottomSpace"},filebrowserImageUploadUrl:"/_ui/common/request/servlet/RtaImageUploadServlet",toolbarCanCollapse:!0,resize_enabled:!0,enterMode:CKEDITOR.ENTER_BR,shiftEnterMode:CKEDITOR.ENTER_P,forcePasteAsPlainText:!0,forceSimpleAmpersand:!1,pasteFromWordRemoveFontStyles:!0,pasteFromWordRemoveStyles:!0,imageUploadAllowedExtensions:".(jpg|gif|jpeg|png|bmp|jfif|jpe|pjpeg)$",imageUploadDeniedExtensions:"",extraAllowedContent:["div{*}(*); span{*}(*); p{*}(*); br{*}(*); hr{*}(*);","iframe{*}(*);","h1{*}(*); h2{*}(*); h3{*}(*); h4{*}(*); h5{*}(*); h6{*}(*);","a[*]{*}(*);","img[!src,alt,width,height,border]{*}(*);","font[face,size,color];","strike; s; b; em; strong; i; big; small; sub; sup; blockquote; ins; kbd; pre{*}(*); tt;","abbr; acronym; address; bdo; caption; cite; code; col; colgroup;","dd; del; dfn; dl; dt; q; samp; var;","table{*}(*)[align,border,cellpadding,cellspacing,summary];","caption{*}(*); tbody{*}(*); thead{*}(*); tfoot{*}(*);","th{*}(*)[scope,colspan,rowspan,align,valign]; tr{*}(*)[align,valign]; td{*}(*)[scope,colspan,rowspan,align,valign];"],coreStyles_strike:{element:"strike"},coreStyles_bold:{element:"b"},coreStyles_italic:{element:"i"},toolbar_Full:[{name:"document",items:["Source","-","Save","Preview","Print","-","Templates"]},{name:"clipboard",items:["Cut","Copy","Paste","PasteText","PasteFromWord","-","Undo","Redo"]},{name:"editing",items:["Find","Replace","-","SelectAll","-"]},"/",{name:"basicstyles",items:["Bold","Italic","Underline","Strike","-","RemoveFormat"]},{name:"paragraph",items:["NumberedList","BulletedList","-","Outdent","Indent","-","Blockquote","-","JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock","-","BidiLtr","BidiRtl"]},"/",{name:"links",items:["Link","Unlink","Anchor"]},{name:"insert",items:["sfdcImage","Table","HorizontalRule","Smiley","SpecialChar","PageBreak"]},"/",{name:"styles",items:["Format","FontSize"]},{name:"colors",items:["TextColor","BGColor"]},{name:"tools",items:["Maximize"]}],toolbar:"Full",removePlugins:"elementspath, image",extraPlugins:"sfdcImage,sfdcMediaEmbed,sfdcSmartLink,sfdcCodeBlock,sfdcTable,sfdcVfAjax4J",removeDialogTabs:"",plugins:"about,a11yhelp,basicstyles,bidi,blockquote,clipboard,colorbutton,colordialog,contextmenu,dialogadvtab,div,elementspath,enterkey,entities,filebrowser,find,flash,floatingspace,font,format,forms,horizontalrule,htmlwriter,image,iframe,indentlist,indentblock,justify,language,link,list,liststyle,magicline,maximize,newpage,pagebreak,pastefromword,pastetext,preview,print,removeformat,resize,save,selectall,showblocks,showborders,smiley,sourcearea,specialchar,stylescombo,tab,table,tabletools,templates,toolbar,undo,wysiwygarea"})})}}!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],e):e(t.jQuery)}(this,function(t){"use strict";function e(t){return"number"==typeof t&&!nt(t)}function s(t){return void 0===t}function i(t,e){for(var s=arguments.length,i=Array(s>2?s-2:0),n=2;n<s;n++)i[n-2]=arguments[n];return function(){for(var s=arguments.length,n=Array(s),a=0;a<s;a++)n[a]=arguments[a];return t.apply(e,i.concat(n))}}function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return ot.test(t)?Math.round(t*e)/e:t}function a(t){var e=t.match(lt);return e&&(e[1]!==rt.protocol||e[2]!==rt.hostname||e[3]!==rt.port)}function o(t){var e="timestamp="+(new Date).getTime();return t+(-1===t.indexOf("?")?"?":"&")+e}function r(t){var s=t.rotate,i=t.scaleX,n=t.scaleY,a=t.translateX,o=t.translateY,r=[];return e(a)&&0!==a&&r.push("translateX("+a+"px)"),e(o)&&0!==o&&r.push("translateY("+o+"px)"),e(s)&&0!==s&&r.push("rotate("+s+"deg)"),e(i)&&1!==i&&r.push("scaleX("+i+")"),e(n)&&1!==n&&r.push("scaleY("+n+")"),r.length?r.join(" "):"none"}function l(e,s){var i=e.pageX,n=e.pageY,a={endX:i,endY:n};return s?a:t.extend({startX:i,startY:n},a)}function h(t){var e=t.aspectRatio,s=t.height,i=t.width,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",a=function(t){return dt(t)&&t>0};if(a(i)&&a(s)){var o=s*e;"contain"===n&&o>i||"cover"===n&&o<i?s=i/e:i=s*e}else a(i)?s=i/e:a(s)&&(i=s*e);return{width:i,height:s}}function c(t){var e=new DataView(t),s=void 0,i=void 0,n=void 0,a=void 0;if(255===e.getUint8(0)&&216===e.getUint8(1))for(var o=e.byteLength,r=2;r<o;){if(255===e.getUint8(r)&&225===e.getUint8(r+1)){n=r;break}r+=1}if(n){var l=n+10;if("Exif"===function(t,e,s){var i="",n=void 0;for(s+=e,n=e;n<s;n+=1)i+=pt(t.getUint8(n));return i}(e,n+4,4)){var h=e.getUint16(l);if(((i=18761===h)||19789===h)&&42===e.getUint16(l+2,i)){var c=e.getUint32(l+4,i);c>=8&&(a=l+c)}}}if(a){var d=e.getUint16(a,i),p=void 0,u=void 0;for(u=0;u<d;u+=1)if(p=a+12*u+2,274===e.getUint16(p,i)){p+=8,s=e.getUint16(p,i),e.setUint16(p,1,i);break}}return s}t=t&&t.hasOwnProperty("default")?t["default"]:t;var d="undefined"!=typeof window?window:{},p="cropper",u="all",_="crop",m="move",f="zoom",g="e",C="w",E="s",v="n",y="ne",b="nw",w="se",A="sw",L=p+"-crop",T=p+"-disabled",I=p+"-hidden",O=p+"-hide",N=p+"-modal",R=p+"-move",k="action",S="preview",x="crop",D="move",F="none",B="crop",M="cropend",P="cropmove",H="cropstart",U="dblclick",$="error",Y="load",V=d.PointerEvent?"pointerdown":"touchstart mousedown",j=d.PointerEvent?"pointermove":"touchmove mousemove",W=d.PointerEvent?"pointerup pointercancel":"touchend touchcancel mouseup",X="ready",q="resize",J="wheel mousewheel DOMMouseScroll",K="zoom",G=/^(e|w|s|n|se|sw|ne|nw|all|crop|move|zoom)$/,z=/^data:/,Q=/^data:image\/jpeg;base64,/,Z=/^(img|canvas)$/i,tt={viewMode:0,dragMode:x,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},et=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},st=function(){function t(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,s,i){return s&&t(e.prototype,s),i&&t(e,i),e}}(),it=function(t){if(Array.isArray(t)){for(var e=0,s=Array(t.length);e<t.length;e++)s[e]=t[e];return s}return Array.from(t)},nt=Number.isNaN||d.isNaN,at=Object.keys||function(e){var s=[];return t.each(e,function(t){s.push(t)}),s},ot=/\.\d*(?:0|9){12}\d*$/i,rt=d.location,lt=/^(https?:)\/\/([^:\/?#]+):?(\d*)/i,ht=d.navigator,ct=ht&&/(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i.test(ht.userAgent),dt=Number.isFinite||d.isFinite,pt=String.fromCharCode,ut=/^data:.*,/,_t={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.$element,e=this.options,s=this.$container,i=this.$cropper;i.addClass(I),t.removeClass(I),i.css(this.container={width:Math.max(s.width(),Number(e.minContainerWidth)||200),height:Math.max(s.height(),Number(e.minContainerHeight)||100)}),t.addClass(I),i.removeClass(I)},initCanvas:function(){var e=this.container,s=this.image,i=this.options.viewMode,n=Math.abs(s.rotate)%180==90,a=n?s.naturalHeight:s.naturalWidth,o=n?s.naturalWidth:s.naturalHeight,r=a/o,l=e.width,h=e.height;e.height*r>e.width?3===i?l=e.height*r:h=e.width/r:3===i?h=e.width/r:l=e.height*r;var c={aspectRatio:r,naturalWidth:a,naturalHeight:o,width:l,height:h};c.left=(e.width-l)/2,c.top=(e.height-h)/2,c.oldLeft=c.left,c.oldTop=c.top,this.canvas=c,this.limited=1===i||2===i,this.limitCanvas(!0,!0),this.initialImage=t.extend({},s),this.initialCanvas=t.extend({},c)},limitCanvas:function(t,e){var s=this.options,i=this.container,n=this.canvas,a=this.cropBox,o=s.viewMode,r=n.aspectRatio,l=this.cropped&&a;if(t){var c=Number(s.minCanvasWidth)||0,d=Number(s.minCanvasHeight)||0;o>0&&(o>1?(c=Math.max(c,i.width),d=Math.max(d,i.height),3===o&&(d*r>c?c=d*r:d=c/r)):c?c=Math.max(c,l?a.width:0):d?d=Math.max(d,l?a.height:0):l&&(c=a.width,(d=a.height)*r>c?c=d*r:d=c/r));var p=h({aspectRatio:r,width:c,height:d});c=p.width,d=p.height,n.minWidth=c,n.minHeight=d,n.maxWidth=1/0,n.maxHeight=1/0}if(e)if(o>0){var u=i.width-n.width,_=i.height-n.height;n.minLeft=Math.min(0,u),n.minTop=Math.min(0,_),n.maxLeft=Math.max(0,u),n.maxTop=Math.max(0,_),l&&this.limited&&(n.minLeft=Math.min(a.left,a.left+a.width-n.width),n.minTop=Math.min(a.top,a.top+a.height-n.height),n.maxLeft=a.left,n.maxTop=a.top,2===o&&(n.width>=i.width&&(n.minLeft=Math.min(0,u),n.maxLeft=Math.max(0,u)),n.height>=i.height&&(n.minTop=Math.min(0,_),n.maxTop=Math.max(0,_))))}else n.minLeft=-n.width,n.minTop=-n.height,n.maxLeft=i.width,n.maxTop=i.height},renderCanvas:function(t,e){var s=this.canvas,i=this.image;if(e){var n=function(t){var e=t.width,s=t.height,i=t.degree;if(90==(i=Math.abs(i)%180))return{width:s,height:e};var n=i%90*Math.PI/180,a=Math.sin(n),o=Math.cos(n),r=e*o+s*a,l=e*a+s*o;return i>90?{width:l,height:r}:{width:r,height:l}}({width:i.naturalWidth*Math.abs(i.scaleX||1),height:i.naturalHeight*Math.abs(i.scaleY||1),degree:i.rotate||0}),a=n.width,o=n.height,l=s.width*(a/s.naturalWidth),h=s.height*(o/s.naturalHeight);s.left-=(l-s.width)/2,s.top-=(h-s.height)/2,s.width=l,s.height=h,s.aspectRatio=a/o,s.naturalWidth=a,s.naturalHeight=o,this.limitCanvas(!0,!1)}(s.width>s.maxWidth||s.width<s.minWidth)&&(s.left=s.oldLeft),(s.height>s.maxHeight||s.height<s.minHeight)&&(s.top=s.oldTop),s.width=Math.min(Math.max(s.width,s.minWidth),s.maxWidth),s.height=Math.min(Math.max(s.height,s.minHeight),s.maxHeight),this.limitCanvas(!1,!0),s.left=Math.min(Math.max(s.left,s.minLeft),s.maxLeft),s.top=Math.min(Math.max(s.top,s.minTop),s.maxTop),s.oldLeft=s.left,s.oldTop=s.top,this.$canvas.css({width:s.width,height:s.height,transform:r({translateX:s.left,translateY:s.top})}),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(e){var s=this.canvas,i=this.image,n=i.naturalWidth*(s.width/s.naturalWidth),a=i.naturalHeight*(s.height/s.naturalHeight);t.extend(i,{width:n,height:a,left:(s.width-n)/2,top:(s.height-a)/2}),this.$clone.css({width:i.width,height:i.height,transform:r(t.extend({translateX:i.left,translateY:i.top},i))}),e&&this.output()},initCropBox:function(){var e=this.options,s=this.canvas,i=e.aspectRatio,n=Number(e.autoCropArea)||.8,a={width:s.width,height:s.height};i&&(s.height*i>s.width?a.height=a.width/i:a.width=a.height*i),this.cropBox=a,this.limitCropBox(!0,!0),a.width=Math.min(Math.max(a.width,a.minWidth),a.maxWidth),a.height=Math.min(Math.max(a.height,a.minHeight),a.maxHeight),a.width=Math.max(a.minWidth,a.width*n),a.height=Math.max(a.minHeight,a.height*n),a.left=s.left+(s.width-a.width)/2,a.top=s.top+(s.height-a.height)/2,a.oldLeft=a.left,a.oldTop=a.top,this.initialCropBox=t.extend({},a)},limitCropBox:function(t,e){var s=this.options,i=this.container,n=this.canvas,a=this.cropBox,o=this.limited,r=s.aspectRatio;if(t){var l=Number(s.minCropBoxWidth)||0,h=Number(s.minCropBoxHeight)||0,c=Math.min(i.width,o?n.width:i.width),d=Math.min(i.height,o?n.height:i.height);l=Math.min(l,i.width),h=Math.min(h,i.height),r&&(l&&h?h*r>l?h=l/r:l=h*r:l?h=l/r:h&&(l=h*r),d*r>c?d=c/r:c=d*r),a.minWidth=Math.min(l,c),a.minHeight=Math.min(h,d),a.maxWidth=c,a.maxHeight=d}e&&(o?(a.minLeft=Math.max(0,n.left),a.minTop=Math.max(0,n.top),a.maxLeft=Math.min(i.width,n.left+n.width)-a.width,a.maxTop=Math.min(i.height,n.top+n.height)-a.height):(a.minLeft=0,a.minTop=0,a.maxLeft=i.width-a.width,a.maxTop=i.height-a.height))},renderCropBox:function(){var t=this.options,e=this.container,s=this.cropBox;(s.width>s.maxWidth||s.width<s.minWidth)&&(s.left=s.oldLeft),(s.height>s.maxHeight||s.height<s.minHeight)&&(s.top=s.oldTop),s.width=Math.min(Math.max(s.width,s.minWidth),s.maxWidth),s.height=Math.min(Math.max(s.height,s.minHeight),s.maxHeight),this.limitCropBox(!1,!0),s.left=Math.min(Math.max(s.left,s.minLeft),s.maxLeft),s.top=Math.min(Math.max(s.top,s.minTop),s.maxTop),s.oldLeft=s.left,s.oldTop=s.top,t.movable&&t.cropBoxMovable&&this.$face.data(k,s.width>=e.width&&s.height>=e.height?m:u),this.$cropBox.css({width:s.width,height:s.height,transform:r({translateX:s.left,translateY:s.top})}),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),this.completed&&this.trigger(B,this.getData())}},mt={initPreview:function(){var e=this.crossOrigin,s=e?this.crossOriginUrl:this.url,i=document.createElement("img");e&&(i.crossOrigin=e),i.src=s;var n=t(i);this.$preview=t(this.options.preview),this.$clone2=n,this.$viewBox.html(n),this.$preview.each(function(i,n){var a=t(n),o=document.createElement("img");a.data(S,{width:a.width(),height:a.height(),html:a.html()}),e&&(o.crossOrigin=e),o.src=s,o.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',a.html(o)})},resetPreview:function(){this.$preview.each(function(e,s){var i=t(s),n=i.data(S);i.css({width:n.width,height:n.height}).html(n.html).removeData(S)})},preview:function(){var e=this.image,s=this.canvas,i=this.cropBox,n=i.width,a=i.height,o=e.width,l=e.height,h=i.left-s.left-e.left,c=i.top-s.top-e.top;this.cropped&&!this.disabled&&(this.$clone2.css({width:o,height:l,transform:r(t.extend({translateX:-h,translateY:-c},e))}),this.$preview.each(function(s,i){var d=t(i),p=d.data(S),u=p.width,_=p.height,m=u,f=_,g=1;n&&(f=a*(g=u/n)),a&&f>_&&(m=n*(g=_/a),f=_),d.css({width:m,height:f}).find("img").css({width:o*g,height:l*g,transform:r(t.extend({translateX:-h*g,translateY:-c*g},e))})}))}},ft={bind:function(){var e=this.$element,s=this.options,n=this.$cropper;t.isFunction(s.cropstart)&&e.on(H,s.cropstart),t.isFunction(s.cropmove)&&e.on(P,s.cropmove),t.isFunction(s.cropend)&&e.on(M,s.cropend),t.isFunction(s.crop)&&e.on(B,s.crop),t.isFunction(s.zoom)&&e.on(K,s.zoom),n.on(V,i(this.cropStart,this)),s.zoomable&&s.zoomOnWheel&&n.on(J,i(this.wheel,this)),s.toggleDragModeOnDblclick&&n.on(U,i(this.dblclick,this)),t(this.element.ownerDocument).on(j,this.onCropMove=i(this.cropMove,this)).on(W,this.onCropEnd=i(this.cropEnd,this)),s.responsive&&t(window).on(q,this.onResize=i(this.resize,this))},unbind:function(){var e=this.$element,s=this.options,i=this.$cropper;t.isFunction(s.cropstart)&&e.off(H,s.cropstart),t.isFunction(s.cropmove)&&e.off(P,s.cropmove),t.isFunction(s.cropend)&&e.off(M,s.cropend),t.isFunction(s.crop)&&e.off(B,s.crop),t.isFunction(s.zoom)&&e.off(K,s.zoom),i.off(V,this.cropStart),s.zoomable&&s.zoomOnWheel&&i.off(J,this.wheel),s.toggleDragModeOnDblclick&&i.off(U,this.dblclick),t(this.element.ownerDocument).off(j,this.onCropMove).off(W,this.onCropEnd),s.responsive&&t(window).off(q,this.onResize)}},gt={resize:function(){var e=this.options,s=this.$container,i=this.container,n=Number(e.minContainerWidth)||200,a=Number(e.minContainerHeight)||100;if(!(this.disabled||i.width<=n||i.height<=a)){var o=s.width()/i.width;if(1!==o||s.height()!==i.height){var r=void 0,l=void 0;e.restore&&(r=this.getCanvasData(),l=this.getCropBoxData()),this.render(),e.restore&&(this.setCanvasData(t.each(r,function(t,e){r[t]=e*o})),this.setCropBoxData(t.each(l,function(t,e){l[t]=e*o})))}}},dblclick:function(){this.disabled||this.options.dragMode===F||this.setDragMode(this.$dragBox.hasClass(L)?D:x)},wheel:function(t){var e=this,s=t.originalEvent||t,i=Number(this.options.wheelZoomRatio)||.1;if(!this.disabled&&(t.preventDefault(),!this.wheeling)){this.wheeling=!0,setTimeout(function(){e.wheeling=!1},50);var n=1;s.deltaY?n=s.deltaY>0?1:-1:s.wheelDelta?n=-s.wheelDelta/120:s.detail&&(n=s.detail>0?1:-1),this.zoom(-n*i,t)}},cropStart:function(e){if(!this.disabled){var s=this.options,i=this.pointers,n=e.originalEvent,a=void 0;n&&n.changedTouches?t.each(n.changedTouches,function(t,e){i[e.identifier]=l(e)}):i[n&&n.pointerId||0]=l(n||e),a=at(i).length>1&&s.zoomable&&s.zoomOnTouch?f:t(e.target).data(k),G.test(a)&&(this.trigger(H,{originalEvent:n,action:a}).isDefaultPrevented()||(e.preventDefault(),this.action=a,this.cropping=!1,a===_&&(this.cropping=!0,this.$dragBox.addClass(N))))}},cropMove:function(e){var s=this.action;if(!this.disabled&&s){var i=this.pointers,n=e.originalEvent;e.preventDefault(),this.trigger(P,{originalEvent:n,action:s}).isDefaultPrevented()||(n&&n.changedTouches?t.each(n.changedTouches,function(e,s){t.extend(i[s.identifier],l(s,!0))}):t.extend(i[n&&n.pointerId||0],l(n||e,!0)),this.change(e))}},cropEnd:function(e){if(!this.disabled){var s=this.action,i=this.pointers,n=e.originalEvent;n&&n.changedTouches?t.each(n.changedTouches,function(t,e){delete i[e.identifier]}):delete i[n&&n.pointerId||0],s&&(e.preventDefault(),at(i).length||(this.action=""),this.cropping&&(this.cropping=!1,this.$dragBox.toggleClass(N,this.cropped&&this.options.modal)),this.trigger(M,{originalEvent:n,action:s}))}}},Ct={change:function(e){var s=this.options,i=this.pointers,n=this.container,a=this.canvas,o=this.cropBox,r=this.action,l=s.aspectRatio,h=o.left,c=o.top,d=o.width,p=o.height,L=h+d,T=c+p,O=0,N=0,R=n.width,k=n.height,S=!0,x=void 0;!l&&e.shiftKey&&(l=d&&p?d/p:1),this.limited&&(O=o.minLeft,N=o.minTop,R=O+Math.min(n.width,a.width,a.left+a.width),k=N+Math.min(n.height,a.height,a.top+a.height));var D,F,B,M=i[at(i)[0]],P={x:M.endX-M.startX,y:M.endY-M.startY},H=function(t){switch(t){case g:L+P.x>R&&(P.x=R-L);break;case C:h+P.x<O&&(P.x=O-h);break;case v:c+P.y<N&&(P.y=N-c);break;case E:T+P.y>k&&(P.y=k-T)}};switch(r){case u:h+=P.x,c+=P.y;break;case g:if(P.x>=0&&(L>=R||l&&(c<=N||T>=k))){S=!1;break}H(g),d+=P.x,l&&(p=d/l,c-=P.x/l/2),d<0&&(r=C,d=0);break;case v:if(P.y<=0&&(c<=N||l&&(h<=O||L>=R))){S=!1;break}H(v),p-=P.y,c+=P.y,l&&(d=p*l,h+=P.y*l/2),p<0&&(r=E,p=0);break;case C:if(P.x<=0&&(h<=O||l&&(c<=N||T>=k))){S=!1;break}H(C),d-=P.x,h+=P.x,l&&(p=d/l,c+=P.x/l/2),d<0&&(r=g,d=0);break;case E:if(P.y>=0&&(T>=k||l&&(h<=O||L>=R))){S=!1;break}H(E),p+=P.y,l&&(d=p*l,h-=P.y*l/2),p<0&&(r=v,p=0);break;case y:if(l){if(P.y<=0&&(c<=N||L>=R)){S=!1;break}H(v),p-=P.y,c+=P.y,d=p*l}else H(v),H(g),P.x>=0?L<R?d+=P.x:P.y<=0&&c<=N&&(S=!1):d+=P.x,P.y<=0?c>N&&(p-=P.y,c+=P.y):(p-=P.y,c+=P.y);d<0&&p<0?(r=A,p=0,d=0):d<0?(r=b,d=0):p<0&&(r=w,p=0);break;case b:if(l){if(P.y<=0&&(c<=N||h<=O)){S=!1;break}H(v),p-=P.y,c+=P.y,d=p*l,h+=P.y*l}else H(v),H(C),P.x<=0?h>O?(d-=P.x,h+=P.x):P.y<=0&&c<=N&&(S=!1):(d-=P.x,h+=P.x),P.y<=0?c>N&&(p-=P.y,c+=P.y):(p-=P.y,c+=P.y);d<0&&p<0?(r=w,p=0,d=0):d<0?(r=y,d=0):p<0&&(r=A,p=0);break;case A:if(l){if(P.x<=0&&(h<=O||T>=k)){S=!1;break}H(C),d-=P.x,h+=P.x,p=d/l}else H(E),H(C),P.x<=0?h>O?(d-=P.x,h+=P.x):P.y>=0&&T>=k&&(S=!1):(d-=P.x,h+=P.x),P.y>=0?T<k&&(p+=P.y):p+=P.y;d<0&&p<0?(r=y,p=0,d=0):d<0?(r=w,d=0):p<0&&(r=b,p=0);break;case w:if(l){if(P.x>=0&&(L>=R||T>=k)){S=!1;break}H(g),p=(d+=P.x)/l}else H(E),H(g),P.x>=0?L<R?d+=P.x:P.y>=0&&T>=k&&(S=!1):d+=P.x,P.y>=0?T<k&&(p+=P.y):p+=P.y;d<0&&p<0?(r=b,p=0,d=0):d<0?(r=A,d=0):p<0&&(r=y,p=0);break;case m:this.move(P.x,P.y),S=!1;break;case f:this.zoom((D=i,F=t.extend({},D),B=[],t.each(D,function(e,s){delete F[e],t.each(F,function(t,e){var i=Math.abs(s.startX-e.startX),n=Math.abs(s.startY-e.startY),a=Math.abs(s.endX-e.endX),o=Math.abs(s.endY-e.endY),r=Math.sqrt(i*i+n*n),l=(Math.sqrt(a*a+o*o)-r)/r;B.push(l)})}),B.sort(function(t,e){return Math.abs(t)<Math.abs(e)}),B[0]),e.originalEvent),S=!1;break;case _:if(!P.x||!P.y){S=!1;break}x=this.$cropper.offset(),h=M.startX-x.left,c=M.startY-x.top,d=o.minWidth,p=o.minHeight,P.x>0?r=P.y>0?w:y:P.x<0&&(h-=d,r=P.y>0?A:b),P.y<0&&(c-=p),this.cropped||(this.$cropBox.removeClass(I),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}S&&(o.width=d,o.height=p,o.left=h,o.top=c,this.action=r,this.renderCropBox()),t.each(i,function(t,e){e.startX=e.endX,e.startY=e.endY})}},Et={crop:function(){this.ready&&!this.disabled&&(this.cropped||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&this.$dragBox.addClass(N),this.$cropBox.removeClass(I)),this.setCropBoxData(this.initialCropBox))},reset:function(){this.ready&&!this.disabled&&(this.image=t.extend({},this.initialImage),this.canvas=t.extend({},this.initialCanvas),this.cropBox=t.extend({},this.initialCropBox),this.renderCanvas(),this.cropped&&this.renderCropBox())},clear:function(){this.cropped&&!this.disabled&&(t.extend(this.cropBox,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),this.$dragBox.removeClass(N),this.$cropBox.addClass(I))},replace:function(t,e){!this.disabled&&t&&(this.isImg&&this.$element.attr("src",t),e?(this.url=t,this.$clone.attr("src",t),this.ready&&this.$preview.find("img").add(this.$clone2).attr("src",t)):(this.isImg&&(this.replaced=!0),this.options.data=null,this.load(t)))},enable:function(){this.ready&&(this.disabled=!1,this.$cropper.removeClass(T))},disable:function(){this.ready&&(this.disabled=!0,this.$cropper.addClass(T))},destroy:function(){var t=this.$element;this.loaded?(this.isImg&&this.replaced&&t.attr("src",this.originalUrl),this.unbuild(),t.removeClass(I)):this.isImg?t.off(Y,this.start):this.$clone&&this.$clone.remove(),t.removeData(p)},move:function(t,e){var i=this.canvas,n=i.left,a=i.top;this.moveTo(s(t)?t:n+Number(t),s(e)?e:a+Number(e))},moveTo:function(t,i){var n=this.canvas,a=!1;s(i)&&(i=t),t=Number(t),i=Number(i),this.ready&&!this.disabled&&this.options.movable&&(e(t)&&(n.left=t,a=!0),e(i)&&(n.top=i,a=!0),a&&this.renderCanvas(!0))},zoom:function(t,e){var s=this.canvas;t=(t=Number(t))<0?1/(1-t):1+t,this.zoomTo(s.width*t/s.naturalWidth,e)},zoomTo:function(e,s){var i,n,a,o,r=this.options,l=this.pointers,h=this.canvas,c=h.width,d=h.height,p=h.naturalWidth,u=h.naturalHeight;if((e=Number(e))>=0&&this.ready&&!this.disabled&&r.zoomable){var _=p*e,m=u*e,f=void 0;if(s&&(f=s.originalEvent),this.trigger(K,{originalEvent:f,oldRatio:c/p,ratio:_/p}).isDefaultPrevented())return;if(f){var g=this.$cropper.offset(),C=l&&at(l).length?(i=l,n=0,a=0,o=0,t.each(i,function(t,e){var s=e.startX,i=e.startY;n+=s,a+=i,o+=1}),{pageX:n/=o,pageY:a/=o}):{pageX:s.pageX||f.pageX||0,pageY:s.pageY||f.pageY||0};h.left-=(_-c)*((C.pageX-g.left-h.left)/c),h.top-=(m-d)*((C.pageY-g.top-h.top)/d)}else h.left-=(_-c)/2,h.top-=(m-d)/2;h.width=_,h.height=m,this.renderCanvas(!0)}},rotate:function(t){this.rotateTo((this.image.rotate||0)+Number(t))},rotateTo:function(t){e(t=Number(t))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.image.rotate=t%360,this.renderCanvas(!0,!0))},scaleX:function(t){var s=this.image.scaleY;this.scale(t,e(s)?s:1)},scaleY:function(t){var s=this.image.scaleX;this.scale(e(s)?s:1,t)},scale:function(t){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.image,n=!1;t=Number(t),s=Number(s),this.ready&&!this.disabled&&this.options.scalable&&(e(t)&&(i.scaleX=t,n=!0),e(s)&&(i.scaleY=s,n=!0),n&&this.renderCanvas(!0,!0))},getData:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=this.options,i=this.image,n=this.canvas,a=this.cropBox,o=void 0;if(this.ready&&this.cropped){o={x:a.left-n.left,y:a.top-n.top,width:a.width,height:a.height};var r=i.width/i.naturalWidth;t.each(o,function(t,s){s/=r,o[t]=e?Math.round(s):s})}else o={x:0,y:0,width:0,height:0};return s.rotatable&&(o.rotate=i.rotate||0),s.scalable&&(o.scaleX=i.scaleX||1,o.scaleY=i.scaleY||1),o},setData:function(s){var i=this.options,n=this.image,a=this.canvas,o={};if(t.isFunction(s)&&(s=s.call(this.element)),this.ready&&!this.disabled&&t.isPlainObject(s)){var r=!1;i.rotatable&&e(s.rotate)&&s.rotate!==n.rotate&&(n.rotate=s.rotate,r=!0),i.scalable&&(e(s.scaleX)&&s.scaleX!==n.scaleX&&(n.scaleX=s.scaleX,r=!0),e(s.scaleY)&&s.scaleY!==n.scaleY&&(n.scaleY=s.scaleY,r=!0)),r&&this.renderCanvas(!0,!0);var l=n.width/n.naturalWidth;e(s.x)&&(o.left=s.x*l+a.left),e(s.y)&&(o.top=s.y*l+a.top),e(s.width)&&(o.width=s.width*l),e(s.height)&&(o.height=s.height*l),this.setCropBoxData(o)}},getContainerData:function(){return this.ready?t.extend({},this.container):{}},getImageData:function(){return this.loaded?t.extend({},this.image):{}},getCanvasData:function(){var e=this.canvas,s={};return this.ready&&t.each(["left","top","width","height","naturalWidth","naturalHeight"],function(t,i){s[i]=e[i]}),s},setCanvasData:function(s){var i=this.canvas,n=i.aspectRatio;t.isFunction(s)&&(s=s.call(this.$element)),this.ready&&!this.disabled&&t.isPlainObject(s)&&(e(s.left)&&(i.left=s.left),e(s.top)&&(i.top=s.top),e(s.width)?(i.width=s.width,i.height=s.width/n):e(s.height)&&(i.height=s.height,i.width=s.height*n),this.renderCanvas(!0))},getCropBoxData:function(){var t=this.cropBox;return this.ready&&this.cropped?{left:t.left,top:t.top,width:t.width,height:t.height}:{}},setCropBoxData:function(s){var i=this.cropBox,n=this.options.aspectRatio,a=void 0,o=void 0;t.isFunction(s)&&(s=s.call(this.$element)),this.ready&&this.cropped&&!this.disabled&&t.isPlainObject(s)&&(e(s.left)&&(i.left=s.left),e(s.top)&&(i.top=s.top),e(s.width)&&s.width!==i.width&&(a=!0,i.width=s.width),e(s.height)&&s.height!==i.height&&(o=!0,i.height=s.height),n&&(a?i.height=i.width/n:o&&(i.width=i.height*n)),this.renderCropBox())},getCroppedCanvas:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var s,i,a,o,r,l,c,d,p,u,_,m,f,g,C,E,v,y,b,w,A,L,T,I,O,N,R,k,S,x,D,F,B,M,P=this.canvas,H=(s=this.$clone[0],i=this.image,a=P,o=e,r=i.rotate,l=void 0===r?0:r,c=i.scaleX,d=void 0===c?1:c,p=i.scaleY,u=void 0===p?1:p,_=a.aspectRatio,m=a.naturalWidth,f=a.naturalHeight,g=o.fillColor,C=void 0===g?"transparent":g,E=o.imageSmoothingEnabled,v=void 0===E||E,y=o.imageSmoothingQuality,b=void 0===y?"low":y,w=o.maxWidth,A=void 0===w?1/0:w,L=o.maxHeight,T=void 0===L?1/0:L,I=o.minWidth,O=void 0===I?0:I,N=o.minHeight,R=void 0===N?0:N,k=document.createElement("canvas"),S=k.getContext("2d"),x=h({aspectRatio:_,width:A,height:T}),D=h({aspectRatio:_,width:O,height:R},"cover"),F=Math.min(x.width,Math.max(D.width,m)),B=Math.min(x.height,Math.max(D.height,f)),M=[-F/2,-B/2,F,B],k.width=n(F),k.height=n(B),S.fillStyle=C,S.fillRect(0,0,F,B),S.save(),S.translate(F/2,B/2),S.rotate(l*Math.PI/180),S.scale(d,u),S.imageSmoothingEnabled=v,S.imageSmoothingQuality=b,S.drawImage.apply(S,[s].concat(it(t.map(M,function(t){return Math.floor(n(t))})))),S.restore(),k);if(!this.cropped)return H;var U=this.getData(),$=U.x,Y=U.y,V=U.width,j=U.height,W=H.width/Math.floor(P.naturalWidth);1!==W&&($*=W,Y*=W,V*=W,j*=W);var X=V/j,q=h({aspectRatio:X,width:e.maxWidth||1/0,height:e.maxHeight||1/0}),J=h({aspectRatio:X,width:e.minWidth||0,height:e.minHeight||0},"cover"),K=h({aspectRatio:X,width:e.width||(1!==W?H.width:V),height:e.height||(1!==W?H.height:j)}),G=K.width,z=K.height;G=Math.min(q.width,Math.max(J.width,G)),z=Math.min(q.height,Math.max(J.height,z));var Q=document.createElement("canvas"),Z=Q.getContext("2d");Q.width=n(G),Q.height=n(z),Z.fillStyle=e.fillColor||"transparent",Z.fillRect(0,0,G,z);var tt=e.imageSmoothingEnabled,et=void 0===tt||tt,st=e.imageSmoothingQuality;Z.imageSmoothingEnabled=et,st&&(Z.imageSmoothingQuality=st);var nt=H.width,at=H.height,ot=$,rt=Y,lt=void 0,ht=void 0,ct=void 0,dt=void 0,pt=void 0,ut=void 0;ot<=-V||ot>nt?(ot=0,lt=0,ct=0,pt=0):ot<=0?(ct=-ot,ot=0,pt=lt=Math.min(nt,V+ot)):ot<=nt&&(ct=0,pt=lt=Math.min(V,nt-ot)),lt<=0||rt<=-j||rt>at?(rt=0,ht=0,dt=0,ut=0):rt<=0?(dt=-rt,rt=0,ut=ht=Math.min(at,j+rt)):rt<=at&&(dt=0,ut=ht=Math.min(j,at-rt));var _t=[ot,rt,lt,ht];if(pt>0&&ut>0){var mt=G/V;_t.push(ct*mt,dt*mt,pt*mt,ut*mt)}return Z.drawImage.apply(Z,[H].concat(it(t.map(_t,function(t){return Math.floor(n(t))})))),Q},setAspectRatio:function(t){var e=this.options;this.disabled||s(t)||(e.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox()))},setDragMode:function(t){var e=this.options,s=void 0,i=void 0;this.loaded&&!this.disabled&&(s=t===x,i=e.movable&&t===D,t=s||i?t:F,this.$dragBox.data(k,t).toggleClass(L,s).toggleClass(R,i),e.cropBoxMovable||this.$face.data(k,t).toggleClass(L,s).toggleClass(R,i))}},vt=function(){function e(s){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(et(this,e),!s||!Z.test(s.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=s,this.$element=t(s),this.options=t.extend({},tt,t.isPlainObject(i)&&i),this.completed=!1,this.cropped=!1,this.disabled=!1,this.isImg=!1,this.limited=!1,this.loaded=!1,this.ready=!1,this.replaced=!1,this.wheeling=!1,this.originalUrl="",this.canvas=null,this.cropBox=null,this.pointers={},this.init()}return st(e,[{key:"init",value:function(){var t=this.$element,e=void 0;if(t.is("img")){if(this.isImg=!0,e=t.attr("src")||"",this.originalUrl=e,!e)return;e=t.prop("src")}else t.is("canvas")&&window.HTMLCanvasElement&&(e=t[0].toDataURL());this.load(e)}},{key:"trigger",value:function(e,s){var i=t.Event(e,s);return this.$element.trigger(i),i}},{key:"load",value:function(e){var s=this;if(e){this.url=e,this.image={};var i=this.$element,n=this.options;if(n.checkOrientation&&window.ArrayBuffer)if(z.test(e))Q.test(e)?this.read((r=e.replace(ut,""),l=atob(r),h=new ArrayBuffer(l.length),c=new Uint8Array(h),t.each(c,function(t){c[t]=l.charCodeAt(t)}),h)):this.clone();else{var r,l,h,c,d=new XMLHttpRequest;d.onerror=function(){s.clone()},d.onload=function(){s.read(d.response)},n.checkCrossOrigin&&a(e)&&!i.prop("crossOrigin")&&(e=o(e)),d.open("get",e),d.responseType="arraybuffer",d.withCredentials="use-credentials"===i.prop("crossOrigin"),d.send()}else this.clone()}}},{key:"read",value:function(e){var s,i,n,a=this.options,o=this.image,r=c(e),l=0,h=1,d=1;if(r>1){this.url=(s="image/jpeg",i=new Uint8Array(e),n="",t.each(i,function(t,e){n+=pt(e)}),"data:"+s+";base64,"+btoa(n));var p=function(t){var e=0,s=1,i=1;switch(t){case 2:s=-1;break;case 3:e=-180;break;case 4:i=-1;break;case 5:e=90,i=-1;break;case 6:
e=90;break;case 7:e=90,s=-1;break;case 8:e=-90}return{rotate:e,scaleX:s,scaleY:i}}(r);l=p.rotate,h=p.scaleX,d=p.scaleY}a.rotatable&&(o.rotate=l),a.scalable&&(o.scaleX=h,o.scaleY=d),this.clone()}},{key:"clone",value:function(){var e=this.$element,s=this.options,i=this.url,n="",r=void 0;s.checkCrossOrigin&&a(i)&&((n=e.prop("crossOrigin"))?r=i:(n="anonymous",r=o(i))),this.crossOrigin=n,this.crossOriginUrl=r;var l=document.createElement("img");n&&(l.crossOrigin=n),l.src=r||i;var h=t(l);this.$clone=h,this.isImg?this.element.complete?this.start():e.one(Y,t.proxy(this.start,this)):h.one(Y,t.proxy(this.start,this)).one($,t.proxy(this.stop,this)).addClass(O).insertAfter(e)}},{key:"start",value:function(){var e=this,s=this.$clone,i=this.$element;this.isImg||(s.off($,this.stop),i=s),function(t,e){if(!t.naturalWidth||ct){var s=document.createElement("img");s.onload=function(){e(s.width,s.height)},s.src=t.src}else e(t.naturalWidth,t.naturalHeight)}(i[0],function(s,i){t.extend(e.image,{naturalWidth:s,naturalHeight:i,aspectRatio:s/i}),e.loaded=!0,e.build()})}},{key:"stop",value:function(){this.$clone.remove(),this.$clone=null}},{key:"build",value:function(){var e=this;if(this.loaded){this.ready&&this.unbuild();var s=this.$element,i=this.options,n=this.$clone,a=t('<div class="cropper-container"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-action="e"></span><span class="cropper-line line-n" data-action="n"></span><span class="cropper-line line-w" data-action="w"></span><span class="cropper-line line-s" data-action="s"></span><span class="cropper-point point-e" data-action="e"></span><span class="cropper-point point-n" data-action="n"></span><span class="cropper-point point-w" data-action="w"></span><span class="cropper-point point-s" data-action="s"></span><span class="cropper-point point-ne" data-action="ne"></span><span class="cropper-point point-nw" data-action="nw"></span><span class="cropper-point point-sw" data-action="sw"></span><span class="cropper-point point-se" data-action="se"></span></div></div>'),o=a.find("."+p+"-crop-box"),r=o.find("."+p+"-face");this.$container=s.parent(),this.$cropper=a,this.$canvas=a.find("."+p+"-canvas").append(n),this.$dragBox=a.find("."+p+"-drag-box"),this.$cropBox=o,this.$viewBox=a.find("."+p+"-view-box"),this.$face=r,s.addClass(I).after(a),this.isImg||n.removeClass(O),this.initPreview(),this.bind(),i.aspectRatio=Math.max(0,i.aspectRatio)||NaN,i.viewMode=Math.max(0,Math.min(3,Math.round(i.viewMode)))||0,this.cropped=i.autoCrop,i.autoCrop?i.modal&&this.$dragBox.addClass(N):o.addClass(I),i.guides||o.find("."+p+"-dashed").addClass(I),i.center||o.find("."+p+"-center").addClass(I),i.cropBoxMovable&&r.addClass(R).data(k,u),i.highlight||r.addClass("cropper-invisible"),i.background&&a.addClass(p+"-bg"),i.cropBoxResizable||o.find("."+p+"-line,."+p+"-point").addClass(I),this.setDragMode(i.dragMode),this.render(),this.ready=!0,this.setData(i.data),this.completing=setTimeout(function(){t.isFunction(i.ready)&&s.one(X,i.ready),e.trigger(X),e.trigger(B,e.getData()),e.completed=!0},0)}}},{key:"unbuild",value:function(){this.ready&&(this.completed||clearTimeout(this.completing),this.ready=!1,this.completed=!1,this.initialImage=null,this.initialCanvas=null,this.initialCropBox=null,this.container=null,this.canvas=null,this.cropBox=null,this.unbind(),this.resetPreview(),this.$preview=null,this.$viewBox=null,this.$cropBox=null,this.$dragBox=null,this.$canvas=null,this.$container=null,this.$cropper.remove(),this.$cropper=null)}}],[{key:"setDefaults",value:function(e){t.extend(tt,t.isPlainObject(e)&&e)}}]),e}();if(t.extend&&t.extend(vt.prototype,_t,mt,ft,gt,Ct,Et),t.fn){var yt=t.fn.cropper;t.fn.cropper=function(e){for(var i=arguments.length,n=Array(i>1?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];var o=void 0;return this.each(function(s,i){var a=t(i),r=a.data(p);if(!r){if(/destroy/.test(e))return;var l=t.extend({},a.data(),t.isPlainObject(e)&&e);r=new vt(i,l),a.data(p,r)}if("string"==typeof e){var h=r[e];t.isFunction(h)&&(o=h.apply(r,n))}}),s(o)?this:o},t.fn.cropper.Constructor=vt,t.fn.cropper.setDefaults=vt.setDefaults,t.fn.cropper.noConflict=function(){return t.fn.cropper=yt,this}}}),/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */
"document"in self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))?!function(){"use strict";var t=document.createElement("_");if(t.classList.add("c1","c2"),!t.classList.contains("c2")){var e=function(t){var e=DOMTokenList.prototype[t];DOMTokenList.prototype[t]=function(t){var s,i=arguments.length;for(s=0;s<i;s++)t=arguments[s],e.call(this,t)}};e("add"),e("remove")}if(t.classList.toggle("c3",!1),t.classList.contains("c3")){var s=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return 1 in arguments&&!this.contains(t)==!e?e:s.call(this,t)}}t=null}():!function(t){"use strict";if("Element"in t){var e="classList",s="prototype",i=t.Element[s],n=Object,a=String[s].trim||function(){return this.replace(/^\s+|\s+$/g,"")},o=Array[s].indexOf||function(t){for(var e=0,s=this.length;e<s;e++)if(e in this&&this[e]===t)return e;return-1},r=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},l=function(t,e){if(""===e)throw new r("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(e))throw new r("INVALID_CHARACTER_ERR","String contains an invalid character");return o.call(t,e)},h=function(t){for(var e=a.call(t.getAttribute("class")||""),s=e?e.split(/\s+/):[],i=0,n=s.length;i<n;i++)this.push(s[i]);this._updateClassName=function(){t.setAttribute("class",this.toString())}},c=h[s]=[],d=function(){return new h(this)};if(r[s]=Error[s],c.item=function(t){return this[t]||null},c.contains=function(t){return t=String(t),l(this,t)!==-1},c.add=function(){var t,e=arguments,s=0,i=e.length,n=!1;do t=String(e[s]),l(this,t)===-1&&(this.push(t),n=!0);while(++s<i);n&&this._updateClassName()},c.remove=function(){var t,e,s=arguments,i=0,n=s.length,a=!1;do for(t=String(s[i]),e=l(this,t);e!==-1;)this.splice(e,1),a=!0,e=l(this,t);while(++i<n);a&&this._updateClassName()},c.toggle=function(t,e){t=String(t);var s=this.contains(t),i=s?e!==!0&&"remove":e!==!1&&"add";return i&&this[i](t),e===!0||e===!1?e:!s},c.toString=function(){return this.join(" ")},n.defineProperty){var p={get:d,enumerable:!0,configurable:!0};try{n.defineProperty(i,e,p)}catch(u){u.number===-2146823252&&(p.enumerable=!1,n.defineProperty(i,e,p))}}else n[s].__defineGetter__&&i.__defineGetter__(e,d)}}(self)),"remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),"function"!=typeof Object.assign&&(Object.assign=function(t,e){"use strict";if(null===t)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(null!==n)for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(s[a]=n[a])}return s}),!function(t,e){"function"==typeof define&&define.amd?define([],function(){return t.svg4everybody=e()}):"object"==typeof module&&module.exports?module.exports=e():t.svg4everybody=e()}(this,function(){function t(t,e,s){if(s){var i=document.createDocumentFragment(),n=!e.hasAttribute("viewBox")&&s.getAttribute("viewBox");n&&e.setAttribute("viewBox",n);for(var a=s.cloneNode(!0);a.childNodes.length;)i.appendChild(a.firstChild);t.appendChild(i)}}function e(e){e.onreadystatechange=function(){if(4===e.readyState){var s=e._cachedDocument;s||(s=e._cachedDocument=document.implementation.createHTMLDocument(""),s.body.innerHTML=e.responseText,e._cachedTarget={}),e._embeds.splice(0).map(function(i){var n=e._cachedTarget[i.id];n||(n=e._cachedTarget[i.id]=s.getElementById(i.id)),t(i.parent,i.svg,n)})}},e.onreadystatechange()}function s(s){function n(){for(var s=0;s<_.length;){var r=_[s],l=r.parentNode,h=i(l);if(h){var c=r.getAttribute("xlink:href")||r.getAttribute("href");if(a)if(!o.validate||o.validate(c,h,r)){l.removeChild(r);var d=c.split("#"),f=d.shift(),g=d.join("#");if(f.length){var C=p[f];C||(C=p[f]=new XMLHttpRequest,C.open("GET",f),C.send(),C._embeds=[]),C._embeds.push({parent:l,svg:h,id:g}),e(C)}else t(l,h,document.getElementById(g))}else++s,++m}else++s}(!_.length||_.length-m>0)&&u(n,67)}var a,o=Object(s),r=/\bTrident\/[567]\b|\bMSIE (?:9|10)\.0\b/,l=/\bAppleWebKit\/(\d+)\b/,h=/\bEdge\/12\.(\d+)\b/,c=/\bEdge\/.(\d+)\b/,d=window.top!==window.self;a="polyfill"in o?o.polyfill:r.test(navigator.userAgent)||(navigator.userAgent.match(h)||[])[1]<10547||(navigator.userAgent.match(l)||[])[1]<537||c.test(navigator.userAgent)&&d;var p={},u=window.requestAnimationFrame||setTimeout,_=document.getElementsByTagName("use"),m=0;a&&n()}function i(t){for(var e=t;"svg"!==e.nodeName.toLowerCase()&&(e=e.parentNode););return e}return s}),"function"==typeof $.aljsInit&&$.aljsInit({assetsLocation:BackEndJSSettings.RESOURCE.BACKEND+"/lightning",scoped:!0});var fielo=function(){"use strict";return{util:{getObjectValue:function(t,e){return t.hasOwnProperty(e[0])?e.length>1?"object"==typeof t[e[0]]?this.getObjectValue(t[e.shift()],e):void 0:t[e[0]]:""},getParentUntil:function(t,e){var s,i=e.charAt(0);switch(i){case".":for(s=e.substr(1);t&&t!==document;t=t.parentNode)if(t.classList.contains(s))return t;break;case"#":for(s=e.substr(1);t&&t!==document;t=t.parentNode)if(t.id===s)return t;break;case"[":s=e.substr(1,e.length-2).split("=");var n=s[0].trim();if(1===s.length){for(;t&&t!==document;t=t.parentNode)if(t.hasAttribute(n))return t}else if(2===s.length){var a=!1,o=s[1].trim();for("~"===n.substr(n.length-1,1)&&(n=n.substr(0,n.length-1),a=!0);t&&t!==document;t=t.parentNode)if(t.hasAttribute(n)){var r=t.getAttribute(n);if(r===o||a===!0&&r.indexOf(o)>=0)return t}}else console.log("Invalid selector:"+e);break;default:for(;t&&t!==document;t=t.parentNode)if(t.tagName.toLowerCase()===e)return t}return!1},registered_:[],unescapeJsInHtml:function(t){return t&&t.replace&&(t=t.replace(/\\\\/g,"\\"),t=t.replace(/\\'/g,"'"),t=t.replace(/\\n/g,"\n"),t=t.replace(/\\&#39;/g,"'"),t=t.replace(/&#39;/g,"'"),t=t.replace(/&quot;/g,'"')),t},parseDateFromSF:function(t){if(t&&""!==t)if("number"==typeof t&&(t=t.toString()),t.match("[0-9]{10,13}")&&t.match("^[0-9]*$"))t=Number(t);else if(t.indexOf("GMT")===-1){var e=t.split(" ")[0],s=[],i=[];if("undefined"!=typeof t.split(" ")[1]&&(s=t.split(" ")[1].split(":")),t.indexOf("/")===-1)e=e.split("-"),i.push(Number(e[0])),i.push(Number(e[1]-1)),i.push(Number(e[2])),s&&(i.push(Number(s[0])),i.push(Number(s[1])),i.push(Number(s[2])));else{e=e.split("/");var n,a,o,r=BackEndJSSettings.DATE_FORMAT.split("/");0===r[0].toLowerCase().indexOf("y")?n=0:0===r[0].toLowerCase().indexOf("m")?a=0:o=0,0===r[1].toLowerCase().indexOf("y")?n=1:0===r[1].toLowerCase().indexOf("m")?a=1:o=1,0===r[2].toLowerCase().indexOf("y")?n=2:0===r[2].toLowerCase().indexOf("m")?a=2:o=2,i.push(Number(e[n])),i.push(Number(e[a]-1)),i.push(Number(e[o])),s&&(i.push(Number(s[0])),i.push(Number(s[1])))}t=Date.UTC.apply(null,i)}else t=new Date(t).valueOf();return t},parseDateToSF:function(t){return t&&""!==t&&(t=new Date(t),t=new Date(t.valueOf()-6e4*t.getTimezoneOffset()).valueOf()),t},formatDate:function(){BackEndJSSettings.DATE_FORMAT=BackEndJSSettings.DATE_FORMAT.replace(/^d\//g,"dd/").replace(/\/d\//g,"/dd/").replace(/\/d$/g,"/dd").replace(/d/g,"D").replace(/^yy\//g,"yyyy/").replace(/\/yy\//g,"/yyyy/").replace(/\/yy$/g,"/yyyy").replace(/y/g,"Y"),BackEndJSSettings.DATETIME_FORMAT=BackEndJSSettings.DATETIME_FORMAT.replace(/^d\//g,"dd/").replace(/\/d\//g,"/dd/").replace(/\/d+\s/g,"/dd ").replace(/d/g,"D").replace(/^yy\//g,"yyyy/").replace(/\/yy\//g,"/yyyy/").replace(/\/yy+\s/g,"/yyyy ").replace(/y/g,"Y")},escapeHTML:function(t){return t&&t.replace&&(t=t.replace(/&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;")),t},unescapeHTML:function(t){var e=[{key:"&amp;",value:"&"},{key:"&gt;",value:">"},{key:"&quot;",value:"'"}];return t&&t.replace&&e.forEach(function(e){var s=new RegExp(e.key,"g");t=t.replace(s,e.value)}),t},register:function(t){fielo.util.registered_.push(t)},init:function(){fielo.util.registered_.forEach(function(t){componentHandler.register(t)})},backdrop:document.getElementsByClassName("slds-backdrop")[0],modalShow:function(t,e){var s=document.getElementById(t.id);null!==s.getAttribute("data-on-show")&&window[s.getAttribute("data-on-show")](s,e)}},helper:{registered_:[],register:function(t){fielo.helper.registered_[t.classAsString]=t},init:function(t){t.forEach(function(t){componentHandler.register(fielo.helper.registered_[t])})}}}}();window.fielo=fielo,window.addEventListener("load",function(){"use strict";svg4everybody(),fielo.util.formatDate(),fielo.util.createSpinner(),fielo.util.notify.createContainer(),$("body").modal({selector:'[data-aljs="modal"]',onShow:fielo.util.modalShow})});/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var componentHandler={upgradeDom:function(t,e){},upgradeElement:function(t,e){},upgradeElements:function(t){},upgradeAllRegistered:function(){},registerUpgradedCallback:function(t,e){},register:function(t){},downgradeElements:function(t){}};componentHandler=function(){"use strict";function t(t,e){for(var s=0;s<d.length;s++)if(d[s].className===t)return"undefined"!=typeof e&&(d[s]=e),d[s];return!1}function e(t){var e=t.getAttribute("data-upgraded");return null===e?[""]:e.split(",")}function s(t,s){var i=e(t);return i.indexOf(s)!==-1}function i(e,s){if("undefined"==typeof e&&"undefined"==typeof s)for(var a=0;a<d.length;a++)i(d[a].className,d[a].cssClass);else{var o=e;if("undefined"==typeof s){var r=t(o);r&&(s=r.cssClass)}for(var l=document.querySelectorAll("."+s),h=0;h<l.length;h++)n(l[h],o)}}function n(i,n){if(!("object"==typeof i&&i instanceof Element))throw new Error("Invalid argument provided to upgrade MDL element.");var a=e(i),o=[];if(n)s(i,n)||o.push(t(n));else{var r=i.classList;d.forEach(function(t){r.contains(t.cssClass)&&o.indexOf(t)===-1&&!s(i,t.className)&&o.push(t)})}for(var l,h=0,c=o.length;h<c;h++){if(l=o[h],!l)throw new Error("Unable to find a registered component for the given class.");a.push(l.className),i.setAttribute("data-upgraded",a.join(","));var _=new l.classConstructor(i);_[u]=l,p.push(_);for(var m=0,f=l.callbacks.length;m<f;m++)l.callbacks[m](i);l.widget&&(i[l.className]=_);var g=document.createEvent("Events");g.initEvent("mdl-componentupgraded",!0,!0),i.dispatchEvent(g)}}function a(t){Array.isArray(t)||(t="function"==typeof t.item?Array.prototype.slice.call(t):[t]);for(var e,s=0,i=t.length;s<i;s++)e=t[s],e instanceof HTMLElement&&(n(e),e.children.length>0&&a(e.children))}function o(e){var s="undefined"==typeof e.widget&&"undefined"==typeof e.widget,i=!0;s||(i=e.widget||e.widget);var n={classConstructor:e.constructor||e.constructor,className:e.classAsString||e.classAsString,cssClass:e.cssClass||e.cssClass,widget:i,callbacks:[]};if(d.forEach(function(t){if(t.cssClass===n.cssClass)throw new Error("The provided cssClass has already been registered: "+t.cssClass);if(t.className===n.className)throw new Error("The provided className has already been registered")}),e.constructor.prototype.hasOwnProperty(u))throw new Error("MDL component classes must not have "+u+" defined as a property.");var a=t(e.classAsString,n);a||d.push(n)}function r(e,s){var i=t(e);i&&i.callbacks.push(s)}function l(){fielo.util.init();for(var t=0;t<d.length;t++)i(d[t].className)}function h(t){var e=p.indexOf(t);p.splice(e,1);var s=t.element_.getAttribute("data-upgraded").split(","),i=s.indexOf(t[u].classAsString);s.splice(i,1),t.element_.setAttribute("data-upgraded",s.join(","));var n=document.createEvent("Events");n.initEvent("mdl-componentdowngraded",!0,!0),t.element_.dispatchEvent(n)}function c(t){var e=function(t){p.filter(function(e){return e.element_===t}).forEach(h)};if(t instanceof Array||t instanceof NodeList)for(var s=0;s<t.length;s++)e(t[s]);else{if(!(t instanceof Node))throw new Error("Invalid argument provided to downgrade MDL nodes.");e(t)}}var d=[],p=[],u="mdlComponentConfigInternal_";return{upgradeDom:i,upgradeElement:n,upgradeElements:a,upgradeAllRegistered:l,registerUpgradedCallback:r,register:o,downgradeElements:c}}(),componentHandler.ComponentConfigPublic,componentHandler.ComponentConfig,componentHandler.Component,componentHandler.upgradeDom=componentHandler.upgradeDom,componentHandler.upgradeElement=componentHandler.upgradeElement,componentHandler.upgradeElements=componentHandler.upgradeElements,componentHandler.upgradeAllRegistered=componentHandler.upgradeAllRegistered,componentHandler.registerUpgradedCallback=componentHandler.registerUpgradedCallback,componentHandler.register=componentHandler.register,componentHandler.downgradeElements=componentHandler.downgradeElements,window.componentHandler=componentHandler,window.componentHandler=componentHandler,window.addEventListener("load",function(){"use strict";"classList"in document.createElement("div")&&"querySelector"in document&&"addEventListener"in window&&Array.prototype.forEach?(document.documentElement.classList.add("mdl-js"),componentHandler.upgradeAllRegistered()):(componentHandler.upgradeElement=function(){},componentHandler.register=function(){})}),window.fielo.util.upgradeCKEditor=upgradeCKEditor,function(){"use strict";var t=function(t){this.element_=t,this.init()};window.FieloNotify=t,t.prototype.Constant_={},t.prototype.CssClasses_={CLOSE:"slds-notify__close",BACK:"fielosf-notify__back",CONTINUE:"fielosf-notify__continue",MESSAGE:"fielosf-notify__message",ICON:"fielosf-notify__icon",TYPE_ALERT:"slds-notify--alert",TYPE_TOAST:"slds-notify--toast",THEME_SUCCESS:"slds-theme--success",THEME_ERROR:"slds-theme--error",THEME_OFFLINE:"slds-theme--offline"},t.prototype.show=function(t,e){if("undefined"==typeof t?(this.container_=fielo.util.notify.container,this.setType("toast")):this.container_=t,this.container_.appendChild(this.element_),"undefined"==typeof e&&(e=!0),e){var s;switch(this.theme_){case this.CssClasses_.THEME_SUCCESS:s=5e3;break;case this.CssClasses_.THEME_ERROR:s=1e4;break;case this.CssClasses_.THEME_OFFLINE:s=1e4;break;default:s=1e4}setTimeout(function(){this.hide()}.bind(this),s)}},t.prototype.hide=function(){this.element_.remove()},t.prototype.addMessages=function(t){t.forEach(function(e,s){null===e&&t.splice(s,1)}),this.messageContainer_.innerHTML=fielo.util.unescapeHTML(fielo.util.escapeHTML(t.join("<br/>")))},t.prototype.setTheme=function(t){switch(this.element_.classList.remove(this.CssClasses_.THEME_SUCCESS,this.CssClasses_.THEME_ERROR,this.CssClasses_.THEME_OFFLINE),t.toLowerCase()){case"success":case"info":case"confirm":t=this.CssClasses_.THEME_SUCCESS;break;case"error":t=this.CssClasses_.THEME_ERROR;break;case"offline":default:t=this.CssClasses_.THEME_OFFLINE}this.theme_=t,this.element_.classList.add(t)},t.prototype.setType=function(t){switch(this.element_.classList.remove(this.CssClasses_.TYPE_TOAST,this.CssClasses_.TYPE_ALERT),t.toLowerCase()){case"toast":t=this.CssClasses_.TYPE_TOAST;break;case"alert":t=this.CssClasses_.TYPE_ALERT;break;default:t=this.CssClasses_.TYPE_TOAST}this.element_.classList.add(t)},t.prototype.setIcon=function(t){this.iconContainer_&&this.iconContainer_.setAttribute("xlink:href",t)},t.prototype.init=function(){this.element_&&(this.btnClose_=this.element_.querySelector("."+this.CssClasses_.CLOSE),this.btnBack_=this.element_.querySelector("."+this.CssClasses_.BACK),this.btnContinue_=this.element_.querySelector("."+this.CssClasses_.CONTINUE),this.messageContainer_=this.element_.querySelector("."+this.CssClasses_.MESSAGE),this.iconContainer_=this.element_.querySelector("."+this.CssClasses_.ICON),this.btnClose_&&this.btnClose_.addEventListener("click",this.hide.bind(this)),this.setIcon(BackEndJSSettings.RESOURCE.BACKEND+"/lightning/icons/utility-sprite/svg/symbols.svg#close"),this.setType(this.CssClasses_.TYPE_ALERT))},fielo.util.register({constructor:t,classAsString:"FieloNotify",cssClass:"slds-notify",widget:!0}),window.fielo.util.notify={createContainer:function(){var t=document.createElement("div");t.setAttribute("class","slds-notify_container slds-notify_container--main"),document.getElementsByClassName("fielosf")[0].appendChild(t),window.fielo.util.notify.container=t},create:function(){var t=document.createElement("div");return t.classList.add("slds-notify"),t.innerHTML='<button class="slds-button slds-notify__close slds-button--icon-inverse" title="'+BackEndJSSettings.LABELS.Close+'"><svg aria-hidden="true" class="slds-button__icon"><use class="fielosf-notify__icon" xlink:href=""></use></svg><span class="slds-assistive-text">'+BackEndJSSettings.LABELS.Close+'</span></button><div class="fielosf-notify__message"></div>',componentHandler.upgradeElement(t),t}}}(),function(){"use strict";var t=function(t){this.element_=t,this.init()};window.FieloFormElement=t,t.prototype.Constant_={COMPONENT_ID:"data-component-id",CONTROLLER_ELEMENT:"data-controller-element",FIELD_ID:"data-field-id",FIELD_LABEL:"data-field-label",FIELD_META:"data-field-meta",FIELD_NAME:"data-field-name",FORM_ID:"data-id",LOOKUP_ITEMS:"data-items",OBJECT_LABEL:"data-object-label",OBJECT_NAME:"data-object-name",OBJECT_PLURAL_LABEL:"data-object-plural-label",ON_CHANGE:"data-on-change",OPTIONS_GETTER:"data-options-getter",OPTIONS:"data-options",PICKLIST_CONTROLLER:"."===BackEndJSSettings.RESOURCE.NAMESPACE?"PicklistController.getRecords":BackEndJSSettings.RESOURCE.NAMESPACE+"PicklistController.getRecords",PICKLIST_CONTROLLER_RECORD:"."===BackEndJSSettings.RESOURCE.NAMESPACE?"PicklistController.getName":BackEndJSSettings.RESOURCE.NAMESPACE+"PicklistController.getName",REQUIRED:"data-required",TYPE:"data-type",VALID_FOR:"data-valid-for",VALUE:"data-value",WHERE_CONDITION:"data-where"},t.prototype.CssClasses_={CONTROL:"slds-form-element__control",CHECKBOX:"slds-checkbox",DATE:"slds-date",DATE_TIME:"slds-datetime",DATE_PICKER:"fielosf-date-picker",DATE_PICKER_FAUX:"fielosf-date-picker--faux",DROPDOWN_LIST:"slds-dropdown__list",DROPDOWN_ITEM:"slds-dropdown__item",VOID_ITEM:"slds-dropdown__item--void",ERROR:"slds-has-error",HAS_ICON:"slds-input-has-icon",HELP:"slds-form-element__help",HIDE:"slds-hide",ICON:"slds-form-element__icon",ICON_LEFT:"slds-input-has-icon--left",ICON_RIGHT:"slds-input-has-icon--right",INPUT:"slds-input",LABEL:"slds-form-element__label",LOOKUP:"slds-lookup__search-input",PICKLIST:"slds-picklist",MULTISELECT:"slds-picklist--draggable",PICKLIST_LABEL:"slds-picklist__label",POP_OVER:"slds-popover",RADIO_GROUP:"slds-radio--button-group",RADIO_LABEL:"slds-radio--button__label",READ_ONLY:"slds-form-element__static",SVG:"slds-button__icon",SELECTED:"slds-is-selected"},t.prototype.setErrorMessage=function(t){this.help_&&(t&&(this.help_.innerHTML=t),this.element_.classList.add(this.CssClasses_.ERROR),this.help_.classList.remove(this.CssClasses_.HIDE))},t.prototype.clean=function(){this.help_&&(this.help_.innerHTML="",this.element_.classList.remove(this.CssClasses_.ERROR),this.help_.classList.add(this.CssClasses_.HIDE))},t.prototype.setIconHover_=function(){this.icon_.addEventListener("mouseover",this.showPopover.bind(this)),this.icon_.addEventListener("mouseout",this.hidePopover.bind(this))},t.prototype.showPopover=function(){this.popover_.style.position="absolute",this.popover_.style.left="7px",this.popover_.style.margin="-1.5rem",this.popover_.style.width="40rem",this.popover_.style.top=this.popover_.offsetHeight-18+"px",this.popover_.classList.remove(this.CssClasses_.HIDE)},t.prototype.hidePopover=function(){this.popover_.classList.add(this.CssClasses_.HIDE)},t.prototype.configDatepicker_=function(){var t=BackEndJSSettings.DATE_FORMAT;switch(this.type_){case"input-datetime":this.input_=this.element_.getElementsByClassName(this.CssClasses_.DATE_TIME)[0],t=BackEndJSSettings.DATETIME_FORMAT;break;default:this.input_=this.element_.getElementsByClassName(this.CssClasses_.DATE)[0]}""===this.input_.value?this.defaultConfig_={format:t}:this.defaultConfig_={format:t,initDate:moment(this.input_.value)},this.hiddenPicker_=this.element_.getElementsByClassName(this.CssClasses_.DATE_PICKER)[0],$(this.input_).datepicker(this.defaultConfig_),this.picker_=this.element_.getElementsByClassName(this.CssClasses_.DATE_PICKER_FAUX)[0],this.picker_.addEventListener("click",function(t){t.stopPropagation(),$(this.input_).prev("svg").trigger("click")}.bind(this))},t.prototype.configPicklist_=function(){this.input_=this.element_.getElementsByClassName(this.CssClasses_.PICKLIST)[0],this.elementList_=this.element_.getElementsByClassName(this.CssClasses_.DROPDOWN_LIST)[0],this.elementListItems_=this.elementList_.getElementsByClassName(this.CssClasses_.DROPDOWN_ITEM);var t=0;[].forEach.call(this.elementListItems_,function(e){e.id="option-"+t,t++}),this.voidItem_=this.elementList_.getElementsByClassName(this.CssClasses_.VOID_ITEM)[0],this.label_=this.element_.querySelector("."+this.CssClasses_.PICKLIST_LABEL+" span"),this.labelValue_=String(this.label_.textContent).trim(),this.defaultConfig_={onChange:this.onChange_.bind(this)},$(this.input_).picklist(this.defaultConfig_),this.validFor_&&this.hideItems_()},t.prototype.configMultiselect_=function(){this.input_=this.element_.getElementsByClassName(this.CssClasses_.MULTISELECT)[0];var t={};t.unselectedItems=this.setDataOptions_()||[],t.selectedItems=[],$(this.input_).unbind().removeData();for(var e=this.input_.getElementsByTagName("li");e.length>0;)$(e[0]).remove();$(this.input_).multiSelect(t)},t.prototype.configRadio_=function(){this.input_=null,this.elementListItems_=this.element_.getElementsByTagName("input"),[].forEach.call(this.elementListItems_,function(t){t.addEventListener("change",this.onChange_.bind(this))},this)},t.prototype.configCheckbox_=function(){this.input_=this.element_.getElementsByTagName("input")[0],this.input_.addEventListener("change",this.onChange_.bind(this))},t.prototype.configCheckboxes_=function(){this.elementList_=this.element_.getElementsByClassName(this.CssClasses_.CONTROL)[0],this.elementListItems_=this.elementList_.getElementsByClassName(this.CssClasses_.CHECKBOX),this.initCheckboxesInputs_()},t.prototype.initCheckboxesInputs_=function(){this.inputs_=this.element_.getElementsByTagName("input"),[].forEach.call(this.inputs_,function(t){t.addEventListener("change",this.onChange_.bind(this))},this),this.validFor_&&this.hideItems_()},t.prototype.configRichtext_=function(){this.input_=this.element_.getElementsByClassName(this.CssClasses_.INPUT)[0],tinymce.init({target:this.input_,menubar:!1})},t.prototype.configLookup_=function(){this.input_=this.element_.getElementsByClassName(this.CssClasses_.LOOKUP)[0],this.objectName_=this.element_.getAttribute(this.Constant_.OBJECT_NAME)||null,this.fieldId_=this.element_.getAttribute(this.Constant_.FIELD_ID)||"id",this.fieldLabel_=this.element_.getAttribute(this.Constant_.FIELD_LABEL)||"name",this.fieldMeta_=this.element_.getAttribute(this.Constant_.FIELD_META)||null,this.whereCondition_=this.element_.getAttribute(this.Constant_.WHERE_CONDITION)||"",this.items_=this.element_.getAttribute(this.Constant_.LOOKUP_ITEMS)||null,this.items_&&(this.items_=JSON.parse(this.items_.replace(/\'/g,'"')));var t={};this.objectName_?(t.emptySearchTermQuery=this.lookupEmptySearchTermQuery_.bind(this),t.filledSearchTermQuery=this.getLookupRecords_.bind(this)):t.items=this.items_,t.objectLabel=this.element_.getAttribute(this.Constant_.OBJECT_LABEL)||null,t.objectPluralLabel=this.element_.getAttribute(this.Constant_.OBJECT_PLURAL_LABEL)||null,this.onChangeHook_&&(t.onChange=window[this.onChangeHook_].bind(this)),$(this.input_).lookup(t)},t.prototype.configInput_=function(){this.input_=this.element_.querySelector("input, textarea, select"),this.onChangeHook_&&this.input_.addEventListener("change",window[this.onChangeHook_].bind(this))},t.prototype.lookupEmptySearchTermQuery_=function(t){this.items_&&t(this.items_)},t.prototype.setLookupValue_=function(t,e){try{Visualforce.remoting.Manager.invokeAction(this.Constant_.PICKLIST_CONTROLLER_RECORD,t,function(t){$(e.input_).lookup("setSelection",{id:t.Id,label:t.Name})},{escape:!0})}catch(s){console.warn(s)}},t.prototype.getLookupRecords_=function(t,e){try{Visualforce.remoting.Manager.invokeAction(this.Constant_.PICKLIST_CONTROLLER,this.objectName_,this.fieldId_,this.fieldLabel_,this.fieldMeta_,this.whereCondition_,t,this.processLookupRecords_.bind(this,e),{escape:!0})}catch(s){console.warn(s)}},t.prototype.processLookupRecords_=function(t,e,s){try{if(s.status&&void 0!==e){var i=[];this.fieldMeta_?[].forEach.call(e,function(t){i.push({id:t[this.fieldId_],label:fielo.util.unescapeHTML(t[this.fieldLabel_]),metaLabel:fielo.util.unescapeHTML(t[this.fieldMeta_])})},this):[].forEach.call(e,function(t){i.push({id:fielo.util.unescapeHTML(t[this.fieldId_]),label:fielo.util.unescapeHTML(t[this.fieldLabel_])})},this),t(i)}}catch(n){throw n}},t.prototype.clearOptions_=function(){switch(this.type_){case"picklist":if(this.optionsGetter_)for(this.disable_();this.elementList_.firstChild;)this.elementList_.removeChild(this.elementList_.firstChild)}},t.prototype.renderPicklist_=function(){this.label_.textContent=this.labelValue_;var t="";this.required_||(t+='<li id="'+this.formId_+'-void" data-value="" class="'+this.CssClasses_.DROPDOWN_ITEM+" "+this.CssClasses_.VOID_ITEM+'" role="presentation" title="'+this.labelValue_+'"><a href="javascript:void(0)" role="menuitemradio" data-label-value="'+this.labelValue_+'" ><p class="slds-truncate"><svg aria-hidden="true" class="slds-icon slds-icon--selected slds-icon--x-small slds-icon-text-default slds-m-right--x-small"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Resource.FieloSalesforce_Backend)}/lightning/icons/utility-sprite/svg/symbols.svg#check"></use></svg><span class="option-text">'+this.labelValue_+"</span></p></a></li>");var e=0;this.options_.forEach(function(s){t+='<li class="slds-dropdown__item" id="option-'+e+'" data-value="'+s.value.replace(/\"/g,"##").replace(/&quot;/g,"##").replace(/\'/g,"#-#")+'" role="presentation"><a href="javascript:void(0)" role="menuitemradio" data-label-value="'+s.label+'" ><p class="slds-truncate"><svg aria-hidden="true" class="slds-icon slds-icon--selected slds-icon--x-small slds-icon-text-default slds-m-right--x-small"><use xlink:href="'+BackEndJSSettings.RESOURCE.BACKEND+'/lightning/icons/utility-sprite/svg/symbols.svg#check" xmlns:xlink="http://www.w3.org/1999/xlink"></use></svg><span class="option-text">'+s.label+"</span></p></a></li>",e++}),this.elementList_.innerHTML=t,$(this.input_).picklist("getValue").$choices=$("."+this.CssClasses_.DROPDOWN_ITEM+" a",this.input_),$(this.input_).picklist("bindChoices")},t.prototype.renderCheckboxes_=function(){var t="";this.options_.forEach(function(e){t+='<div class="'+this.CssClasses_.CONTROL+'"><span class="'+this.CssClasses_.CHECKBOX+'"><input type="checkbox" name="options" value ="'+e.value+'" id="'+e.id.replace(/\s/g,"")+'"/><label class="'+this.CssClasses_.CHECKBOX+'__label" for="'+e.id.replace(/\s/g,"")+'"><span class="'+this.CssClasses_.CHECKBOX+'--faux"></span><span class="'+this.CssClasses_.LABEL+'">'+e.label+"</span> </label> </span> </div>"},this),this.elementList_.innerHTML=t,this.initCheckboxesInputs_()},t.prototype.hideItems_=function(){switch(this.type_){case"picklist":case"checkboxes":[].forEach.call(this.elementListItems_,function(t){t.classList.add(this.CssClasses_.HIDE)},this),this.voidItem_&&this.voidItem_.classList.remove(this.CssClasses_.HIDE)}},t.prototype.hide=function(){this.element_.classList.add(this.CssClasses_.HIDE)},t.prototype.show=function(){this.element_.classList.remove(this.CssClasses_.HIDE)},t.prototype.clearSelected_=function(){switch(this.type_){case"picklist":[].forEach.call(this.elementList_.getElementsByClassName(this.CssClasses_.SELECTED),function(t){t.classList.remove(this.CssClasses_.SELECTED)},this);break;case"checkboxes":this.clear()}},t.prototype.showValidOptions_=function(t){switch(this.hideItems_(),this.type_){case"picklist":case"checkboxes":this.validFor_.hasOwnProperty(t)&&this.validFor_[t].forEach(function(t){this.elementList_.querySelector('[data-value="'+t+'"]').classList.remove(this.CssClasses_.HIDE)},this)}this.cbValidOptions_()},t.prototype.selectFirstOption=function(){"hidden"!==this.type_&&this.required_&&this.elementListItems_&&1===$(this.elementListItems_).not("."+this.CssClasses_.HIDE).length&&this.set("value",$(this.elementListItems_).not("."+this.CssClasses_.HIDE)[0].getAttribute(this.Constant_.VALUE))},t.prototype.onChange_=function(){this.dontChangeOnAjax&&this.doChange()},t.prototype.doChange=function(){switch(this.type_){case"radio":[].forEach.call(this.elementListItems_,function(t){t.checked&&(this.input_=t)},this)}if("function"==typeof window[this.onChangeHook_]&&window[this.onChangeHook_](this.get("value"),this),null!==this.dependableElements)for(var t in this.dependableElements)this.dependableElements.hasOwnProperty(t)&&this.dependableElements[t].refresh(this.get("value"))},t.prototype.reset_=function(){switch(this.type_){case"picklist":this.label_.textContent=this.labelValue_;break;case"checkboxes":}if(this.clearSelected_(),this.clearOptions_(),null!==this.dependableElements)for(var t in this.dependableElements)this.dependableElements.hasOwnProperty(t)&&this.dependableElements[t].reset_()},t.prototype.refresh=function(t){this.reset_(),this.optionsGetter_&&"function"==typeof window[this.optionsGetter_]?window[this.optionsGetter_](t,this):this.validFor_&&(this.showValidOptions_(t),this.enable_(),this.selectFirstOption())},t.prototype.render=function(t){switch(this.options_=t,this.type_){case"picklist":this.renderPicklist_();break;case"checkboxes":this.renderCheckboxes_()}this.enable_()},t.prototype.get=function(t){var e,s=[];switch(t){case"id":return this.id_;case"fieldName":return this.element_.getAttribute(this.Constant_.FIELD_NAME);case"label":return this.element_.getAttribute(this.Constant_.OBJECT_LABEL);case"name":return this.input_.name;case"type":return this.type_;case"value":switch(this.type_){case"input-date":return e=this.input_.value,this.input_.value?(e=$(this.input_).datepicker("getDate").valueOf(),e-=6e4*(new Date).getTimezoneOffset()):e=null,e;case"input-datetime":return e=this.input_.value,this.input_.value?(e=$(this.input_).datepicker("getDate").valueOf(),e-=6e4*(new Date).getTimezoneOffset(),e+=6e4*BackEndJSSettings.OFFSET):e=null,e;case"picklist":return e=$(this.input_).picklist("getValueId"),"string"==typeof e?(e=this.input_.querySelector("#"+e),e=e&&e.classList.contains(this.CssClasses_.SELECTED)?e.getAttribute(this.Constant_.VALUE):null):e=null,e;case"lookup":return e=$(this.input_).lookup("getSelection"),e&&(e=e.id),e;case"multiselect":var i=$(this.input_).multiSelect("getSelectedItems");return[].forEach.call(i,function(t){t.hasOwnProperty("id")&&s.push(t.id)}),s.length>0?s:[];case"radio":return this.input_?this.input_.value:null;case"checkbox":return this.input_.checked;case"checkboxes":return[].forEach.call(this.inputs_,function(t){t.checked&&s.push(t.value)}),s;case"richtext":return tinymce.get(this.input_.id).getContent();case"text":return this.element_.getElementsByClassName("fielosf-output")[0].innerHTML;default:return this.input_?this.input_.value:this.element_.getAttribute("data-value")}break;default:return null}},t.prototype.set=function(t,e){if(null!==e&&void 0!==e)switch(t){case"checkboxBinding":this.element_.querySelector("."+this.CssClasses_.CHECKBOX+" input").id=e,this.element_.getElementsByClassName(this.CssClasses_.CHECKBOX+"__label")[0].setAttribute("for",e);break;case"id":this.id_=e,this.element_.setAttribute(this.Constant_.COMPONENT_ID,e);break;case"name":this.input_.name=e;break;case"type":this.type_=e,this.element_.setAttribute(this.Constant_.TYPE,e);break;case"value":switch(this.type_){case"input-date":isNaN(e)||(e+=6e4*(new Date).getTimezoneOffset(),$(this.input_).datepicker("setDate",e));break;case"input-datetime":isNaN(e)||(e+=6e4*(new Date).getTimezoneOffset(),e-=6e4*BackEndJSSettings.OFFSET,$(this.input_).datepicker("setDate",e));break;case"picklist":var s=this.input_.querySelector('[data-value="'+e+'"]');s&&$(this.input_).picklist("setValue",s.id,!0),this.enable_();break;case"multiselect":$(this.input_).multiSelect("setSelectedItems",e);break;case"lookup":this.setLookupValue_(e,this);break;case"radio":[].forEach.call(this.elementListItems_,function(t){t.value===e&&(this.input_=t,this.input_.checked=!0)},this);break;case"checkbox":this.input_.checked=e;break;case"checkboxes":e.forEach(function(t){this.inputs_[t].checked=t},this);break;case"text":this.element_.getElementsByClassName("fielosf-output")[0].innerHTML=e;break;case"richtext":tinymce.get(this.input_.id).setContent(e);break;default:this.input_.value=e}break;default:this.element_.setAttribute(t,e)}},t.prototype.clear=function(){switch(this.type_){case"picklist":this.label_.textContent=this.labelValue_;var t=this.input_.getElementsByClassName(this.CssClasses_.SELECTED)||null;[].forEach.call(t,function(t){t.classList.remove(this.CssClasses_.SELECTED)},this);break;case"lookup":$(this.input_).lookup("setSelection",{});break;case"radio":[].forEach.call(this.elementListItems_,function(t){t.checked=!1});break;case"checkbox":this.input_.checked=!1;break;case"checkboxes":[].forEach.call(this.inputs_,function(t){t.checked=!1});break;case"multiselect":var e=[],s=this.element_.querySelectorAll("."+this.CssClasses_.PICKLIST+"__item");[].forEach.call(s,function(t){e.push(t.id)}),$(this.input_).multiSelect("setUnselectedItems",e);break;case"richtext":tinymce.get(this.input_.id).setContent("");break;default:this.input_.value=""}this.selectFirstOption()},t.prototype.registerDependency_=function(){if(this.controllerElement_){var t=document.getElementById(this.controllerElement_);t&&"object"==typeof t.FieloFormElement&&(t.FieloFormElement.dependableElements[this.element_.id]=this)}},t.prototype.disable_=function(){this.element_.setAttribute("disabled",""),this.element_.classList.add("disabled")},t.prototype.enable_=function(){this.element_.hasAttribute("disabled")&&(this.element_.removeAttribute("disabled"),this.element_.classList.remove("disabled"))},t.prototype.cbValidOptions_=function(){this.cbValidOptionsActions_.forEach(function(t){"function"==typeof window[t]&&window[t](this)},this)},t.prototype.registerCbValidOptions=function(t){this.cbValidOptionsActions_.push(t)},t.prototype.setDataOptions_=function(){var t=this.element_.getAttribute(this.Constant_.OPTIONS)||null;return t&&(t=JSON.parse(t)),t},t.prototype.init=function(){if(this.element_){switch(this.id_=this.element_.getAttribute(this.Constant_.COMPONENT_ID),this.help_=this.element_.getElementsByClassName(this.CssClasses_.HELP)[0]||null,this.icon_=this.element_.getElementsByClassName(this.CssClasses_.ICON)[0]||null,this.icon_&&(this.popover_=this.element_.getElementsByClassName(this.CssClasses_.POP_OVER)[0],this.setIconHover_()),this.type_=this.element_.getAttribute(this.Constant_.TYPE)||null,this.formId_="",this.element_.hasAttribute(this.Constant_.FORM_ID)&&(this.formId_=this.element_.getAttribute(this.Constant_.FORM_ID)||""),this.cbValidOptionsActions_=[],this.dontChangeOnAjax=!0,this.required_=!1,this.element_.hasAttribute(this.Constant_.REQUIRED)&&(this.required_="true"===this.element_.getAttribute(this.Constant_.REQUIRED)),this.controllerElement_=this.element_.getAttribute(this.Constant_.CONTROLLER_ELEMENT)||null,this.controllerElement_&&this.disable_(),this.validFor_=this.element_.getAttribute(this.Constant_.VALID_FOR)||null,this.validFor_&&(this.validFor_=JSON.parse(this.validFor_)),this.onChangeHook_=this.element_.getAttribute(this.Constant_.ON_CHANGE)||null,this.dataOptions_=this.setDataOptions_(),this.optionsGetter_=this.element_.getAttribute(this.Constant_.OPTIONS_GETTER)||null,this.dependableElements={},this.type_){case"picklist":this.configPicklist_();break;case"lookup":this.configLookup_();break;case"input-date":case"input-datetime":this.configDatepicker_();break;case"radio":this.configRadio_();break;case"checkbox":this.configCheckbox_();break;case"checkboxes":this.configCheckboxes_();break;case"multiselect":this.configMultiselect_();break;case"richtext":this.configRichtext_();break;default:this.configInput_()}this.registerDependency_(),this.element_.addEventListener("click",function(t){this.element_.hasAttribute("disabled")&&(t.preventDefault(),t.stopPropagation())}.bind(this)),this.selectFirstOption()}},fielo.util.register({constructor:t,classAsString:"FieloFormElement",cssClass:"slds-form-element",widget:!0})}(),function(){"use strict";var t=function(t){this.element_=t,this.init()};window.FieloOutput=t,t.prototype.Constant_={TYPE:"data-type"},t.prototype.CssClasses_={HIDE:"slds-hide"},t.prototype.configDate_=function(){var t=BackEndJSSettings.DATE_FORMAT,e=this.element_.innerText;""!==e&&(e=fielo.util.parseDateFromSF(e),isNaN(e)||("datetime"===this.type_.toLowerCase()&&(e-=6e4*BackEndJSSettings.OFFSET,t=BackEndJSSettings.DATETIME_FORMAT),e=new Date(e).toISOString(),e=moment(e).parseZone(e).utc().calendar(null,{sameElse:t}),"datetime"===this.type_.toLowerCase()&&(e=e.replace(/am$/g,"AM").replace(/pm$/g,"PM")),"date"===this.type_.toLowerCase()&&e.indexOf(" ")!==-1&&(e=e.substring(0,e.lastIndexOf(" ")),e=e.substring(0,e.lastIndexOf(" ")),e=e.substring(0,e.lastIndexOf(" "))),this.element_.innerText=e))},t.prototype.set=function(t){switch(this.type_.toLowerCase()){case"checkbox":case"boolean":t&&this.element_.getElementsByTagName("input")[0].setAttribute("checked",t);break;default:this.element_.innerHTML=t}this.config_()},t.prototype.renderHTML_=function(){$(this.element_).html($("<div/>").html(this.element_.innerHTML).text())},t.prototype.config_=function(){switch(this.type_.toLowerCase()){case"date":case"datetime":this.configDate_();break;case"html":this.renderHTML_()}},t.prototype.init=function(){this.element_&&(this.type_=this.element_.getAttribute(this.Constant_.TYPE)||"",this.config_(),this.element_.classList.remove(this.CssClasses_.HIDE))},fielo.util.register({constructor:t,classAsString:"FieloOutput",cssClass:"fielosf-output",widget:!0})}(),function(){"use strict";var t=function(t){this.element_=t,this.init()};window.FieloSpinner=t,t.prototype.Constant_={},t.prototype.CssClasses_={HIDE:"slds-hide"},t.prototype.show=function(){this.element_.classList.remove(this.CssClasses_.HIDE)},t.prototype.hide=function(){this.element_.classList.add(this.CssClasses_.HIDE)},t.prototype.init=function(){this.element_&&(window.fielo.util.spinner=this.element_)},componentHandler.register({constructor:t,classAsString:"FieloSpinner",cssClass:"slds-spinner_container",widget:!0}),window.fielo.util.createSpinner=function(){var t=document.createElement("div");t.setAttribute("class","slds-spinner_container slds-spinner_container--main slds-hide"),t.innerHTML='<div class="slds-spinner--brand slds-spinner slds-spinner--medium" role="alert"><span class="slds-assistive-text">'+BackEndJSSettings.LABELS.Loading+'</span><div class="slds-spinner__dot-a"></div><div class="slds-spinner__dot-b"></div></div>',componentHandler.upgradeElement(t),document.getElementsByClassName("fielosf")[0].appendChild(t),window.fielo.util.spinner=t}}(),function(){"use strict";var t=function(t){this.element_=t,this.init()};window.FieloButton=t,t.prototype.Constant_={ACTION:"data-action",CONFIRM:"data-confirm",CONFIRM_MESSAGE:"data-confirm-message",HAS_ERROR:BackEndJSSettings.LABELS.ReviewFollowingErrors,PARAMETERS:"data-parameters",SURE:BackEndJSSettings.LABELS.Areyousure,TYPE:"data-type",REFLECTION:"data-reflection"},t.prototype.CssClasses_={},t.prototype.disable=function(){this.element_.setAttribute("disabled","")},t.prototype.enable=function(){this.element_.removeAttribute("disabled")},t.prototype.setupRemote_=function(){this.action_=this.element_.getAttribute(this.Constant_.ACTION)||null,this.action_&&(this.type_=this.element_.getAttribute(this.Constant_.TYPE)||null)},t.prototype.getParameters=function(){return this.parameters_},t.prototype.setParameter=function(t,e){this.parameters_[t]=e,this.element_.setAttribute(this.Constant_.PARAMETERS,JSON.stringify(this.parameters_))},t.prototype.clearParameters=function(){this.parameters_={},this.element_.setAttribute(this.Constant_.PARAMETERS,"")},t.prototype.setupConfirm_=function(){this.confirm_="true"===this.element_.getAttribute(this.Constant_.CONFIRM),this.confirm_&&(this.confirmMessage=this.element_.getAttribute(this.Constant_.CONFIRM_MESSAGE)||this.Constant_.SURE,this.wasConfirmed=!1)},t.prototype.processHandler_=function(t,e){fielo.util.spinner.FieloSpinner.hide();var s=!1;t?"undefined"!=typeof t.messages&&t.messages.length>0&&t.messages.forEach(function(t){"error"!==t.severity.toLowerCase()&&"fatal"!==t.severity.toLowerCase()||(s=!0)}):s=!0;var i=[],n=fielo.util.notify.create();s?(i.push(this.Constant_.HAS_ERROR),n.FieloNotify.setTheme("error")):n.FieloNotify.setTheme("success"),t?t.messages.forEach(function(t){i.push(t.summary);
},this):i.push(e.message),n.FieloNotify.addMessages(i),n.FieloNotify.show(),i.length=0,t&&(t.redirectURL&&"reload"===t.redirectURL?location.reload():""!==t.redirectURL&&void 0!==t.redirectURL?location.replace(t.redirectURL):this.callback())},t.prototype.clickHandler_=function(t){if(this.confirm_&&!confirm(this.confirmMessage))return t.stopPropagation(),t.preventDefault(),this.wasConfirmed=!1,!1;if(this.wasConfirmed=!0,this.action_)switch(this.type_){case"Remote":fielo.util.spinner.FieloSpinner.show();try{this.reflection_?Visualforce.remoting.Manager.invokeAction(this.action_,"Remote"===this.type_?this.recordId_:{},this.reflection_,JSON.stringify(this.parameters_),this.processHandler_.bind(this),{escape:!1}):Visualforce.remoting.Manager.invokeAction(this.action_,"Remote"===this.type_?this.recordId_:{},this.processHandler_.bind(this),{escape:!1})}catch(e){fielo.util.spinner.FieloSpinner.hide(),console.warn(e)}}},t.prototype.callback=function(t){console.log(t)},t.prototype.init=function(){this.element_&&(this.element_.addEventListener("click",this.clickHandler_.bind(this)),this.parameters_=this.element_.getAttribute(this.Constant_.PARAMETERS)||null,this.reflection_=this.element_.getAttribute(this.Constant_.REFLECTION)||null,this.parameters_?(this.parameters_=JSON.parse(this.parameters_.replace(/\'/g,'"')),this.recordId_=this.parameters_.Id||null):this.parameters_={},this.setupRemote_(),this.setupConfirm_())},componentHandler.register({constructor:t,classAsString:"FieloButton",cssClass:"slds-button",widget:!0})}(),function(){"use strict";var t=function(t){this.element_=t,this.init()};window.FieloSelect=t,t.prototype.Constant_={},t.prototype.CssClasses_={},t.prototype.getValue=function(){return this.element_.options[this.element_.selectedIndex].value},t.prototype.init=function(){this.element_},componentHandler.register({constructor:t,classAsString:"FieloSelect",cssClass:"slds-select",widget:!0})}(),function(){"use strict";var t=function(t){this.element_=t,this.init()};window.FieloMenu=t,t.prototype.Constant_={},t.prototype.CssClasses_={BUTTON_OPEN:"fielosf-menu__open",ITEMS_CONTAINER:"fielosf-menu__items-container",VIEW_MENU:"fielosf-menu--is-view",HIDE:"slds-hide"},t.prototype.trimSalesforceIds_=function(){[].forEach.call(this.itemsContainer_.getElementsByTagName("a"),function(t){var e=t.href.split("?fcf=");e.length>1&&(t.href=e[0]+"?fcf="+e[1].slice(0,-3))})},t.prototype.toggleOpen_=function(){this.itemsContainer_.classList.toggle(this.CssClasses_.HIDE),this.isOpen_?this.isOpen_=!1:this.isOpen_=!0},t.prototype.toggleOpenClick=function(){this.toggleOpen_()},t.prototype.toggleOpenMouseOut=function(){this.itemsContainer_.classList.add(this.CssClasses_.HIDE)},t.prototype.init=function(){this.element_&&(this.isOpen_=!1,this.btnOpen_=this.element_.getElementsByClassName(this.CssClasses_.BUTTON_OPEN)[0],this.itemsContainer_=this.element_.getElementsByClassName(this.CssClasses_.ITEMS_CONTAINER)[0],this.btnOpen_.addEventListener("click",this.toggleOpenClick.bind(this)),this.itemsContainer_.addEventListener("mouseleave",this.toggleOpenMouseOut.bind(this)),this.element_.classList.contains(this.CssClasses_.VIEW_MENU)&&this.trimSalesforceIds_())},componentHandler.register({constructor:t,classAsString:"FieloMenu",cssClass:"fielosf-menu",widget:!0})}(),function(){"use strict";var t=function(t){this.element_=t,this.init()};window.FieloTabs=t,t.prototype.CssClasses_={LINK:"slds-tabs--default__link",TABS:"slds-tabs--default__item",PANELS:"slds-tabs--default__content",ACTIVE:"slds-active",SHOW:"slds-show",HIDE:"slds-hide"},t.prototype.Constant_={CONTROLS:"aria-controls"},t.prototype.setTabs_=function(){this.tabs_=this.element_.getElementsByClassName(this.CssClasses_.TABS),this.activeTab_=this.element_.querySelector("."+this.CssClasses_.TABS+"."+this.CssClasses_.ACTIVE)},t.prototype.setPanels_=function(){var t=this.element_.getElementsByClassName(this.CssClasses_.PANELS);this.panels_=[],[].forEach.call(t,function(t){this.panels_[t.id]=t,t.classList.contains(this.CssClasses_.SHOW)&&(this.activePanel_=this.panels_[t.id])},this)},t.prototype.setEventListeners_=function(){[].forEach.call(this.tabs_,function(t){t.addEventListener("click",this.clickHandler_.bind(this))},this)},t.prototype.clickHandler_=function(t){this.showTab_(t.target),this.callback()},t.prototype.toggle_=function(){try{this.activeTab_.classList.toggle(this.CssClasses_.ACTIVE),this.activePanel_.classList.toggle(this.CssClasses_.SHOW),this.activePanel_.classList.toggle(this.CssClasses_.HIDE)}catch(t){}},t.prototype.showTab_=function(t){this.toggle_(),this.activeTab_=t.parentElement,this.activePanel_=this.panels_[t.getAttribute(this.Constant_.CONTROLS)],this.toggle_()},t.prototype.init=function(){this.element_&&(this.callback=function(){},this.setTabs_(),this.setPanels_(),this.setEventListeners_())},fielo.helper.register({constructor:t,classAsString:"FieloTabs",cssClass:"slds-tabs--default",widget:!0})}(),function(){"use strict";var t=function(t){this.element_=t,this.init()};window.FieloPaginator=t,t.prototype.Constant_={CONTROLLER:"data-controller",CONTROLLER_ARGUMENTS:"data-controller-arguments",BINDING:"data-binding",PAGE:"data-page",RECORDS_PER_PAGE:"data-records-per-page",RECORDS_IN_PAGE:"data-records-in-page",DISABLED:"disabled",FILTERS:"data-filters",ORDER_BY:"data-order-by",WHERE_CLAUSE:"data-where-clause"},t.prototype.CssClasses_={BUTTON_PREVIOUS:"fielosf-button__previous",BUTTON_NEXT:"fielosf-button__next",HIDE:"slds-hide"},t.prototype.setDefaults_=function(){this.controller_=this.element_.getAttribute(this.Constant_.CONTROLLER),this.dataBinding_=this.element_.getAttribute(this.Constant_.BINDING),this.page_=Number(this.element_.getAttribute(this.Constant_.PAGE))||1,this.recordsPerPage_=Number(this.element_.getAttribute(this.Constant_.RECORDS_PER_PAGE)),this.filters_=this.element_.getAttribute(this.Constant_.FILTERS)||null,this.filters_?this.filters_=JSON.parse(this.filters_):this.filters_={},this.orderBy_=this.element_.getAttribute(this.Constant_.ORDER_BY)||null,this.buttons_={previous:this.element_.querySelector("."+this.CssClasses_.BUTTON_PREVIOUS),next:this.element_.querySelector("."+this.CssClasses_.BUTTON_NEXT)},this.quantityOfRecords_=Number(this.element_.getAttribute(this.Constant_.RECORDS_IN_PAGE))||0,this.whereClause_=this.element_.getAttribute(this.Constant_.WHERE_CLAUSE)||null},t.prototype.callback=function(t){fielo.util.spinner.FieloSpinner.hide(),console.warn("callback of paginator not binded"),console.log(t)},t.prototype.setButtonsStatus_=function(){this.quantityOfRecords_<=this.recordsPerPage_?this.buttons_.next.setAttribute(this.Constant_.DISABLED,""):this.buttons_.next.removeAttribute(this.Constant_.DISABLED),1===this.page_?this.buttons_.previous.setAttribute(this.Constant_.DISABLED,""):this.buttons_.previous.removeAttribute(this.Constant_.DISABLED)},t.prototype.getPreviousPage_=function(){this.buttons_.previous.hasAttribute(this.Constant_.DISABLED)||(this.setPage(this.page_-1),this.getRecords())},t.prototype.getNextPage_=function(){this.buttons_.next.hasAttribute(this.Constant_.DISABLED)||(this.setPage(this.page_+1),this.getRecords())},t.prototype.setLinksListeners_=function(){this.buttons_.previous.addEventListener("click",this.getPreviousPage_.bind(this)),this.buttons_.next.addEventListener("click",this.getNextPage_.bind(this))},t.prototype.setUpLinks_=function(){this.setButtonsStatus_(),this.setLinksListeners_()},t.prototype.setPage=function(t){this.page_=t||1,this.element_.setAttribute(this.Constant_.PAGE,this.page_)},t.prototype.getFilters=function(){return this.filters_},t.prototype.setFilters=function(t){for(var e in t)({}).hasOwnProperty.call(t,e)&&(this.filters_[e]=t[e]);this.element_.setAttribute(this.Constant_.FILTERS,JSON.stringify(this.filters_))},t.prototype.setOrderBy=function(t){this.orderBy_=t,this.element_.setAttribute(this.Constant_.ORDER_BY,t)},t.prototype.resolveRequest_=function(t){if(t)this.quantityOfRecords_=t.length||0,this.callback(t.slice(0,this.recordsPerPage_));else{fielo.util.spinner.FieloSpinner.hide();var e=fielo.util.notify.create();e.FieloNotify.addMessages([BackEndJSSettings.LABELS.NoRecordsToShow]),e.FieloNotify.setTheme("info"),e.FieloNotify.show()}this.setButtonsStatus_()},t.prototype.getSObject=function(){return this.element_.getAttribute(this.Constant_.CONTROLLER_ARGUMENTS).split("|")[0]},t.prototype.getRecords=function(){fielo.util.spinner.FieloSpinner.show();var t=[];t.push(this.controller_);var e=this.element_.getAttribute(this.Constant_.CONTROLLER_ARGUMENTS).split("|")||null;e.forEach(function(e){t.push(e)}),t.push(this.page_*this.recordsPerPage_-this.recordsPerPage_),t.push(this.orderBy_),t.push(JSON.stringify(this.filters_)),t.push(this.recordsPerPage_+1),t.push(this.whereClause_),t.push(this.resolveRequest_.bind(this)),t.push({escape:!0});try{Visualforce.remoting.Manager.invokeAction.apply(Visualforce.remoting.Manager,t)}catch(s){fielo.util.spinner.FieloSpinner.hide()}},t.prototype.getParams_=function(){return{offset:this.recordsPerPage_,orderBy:this.orderBy_,page:this.page_}},t.prototype.init=function(){this.element_&&(this.setDefaults_(),this.setUpLinks_())},fielo.helper.register({constructor:t,classAsString:"FieloPaginator",cssClass:"fielosf-paginator"})}(),function(){"use strict";var t=function(t){this.element_=t,this.init()};window.FieloFilter=t,t.prototype.Constant_={BINDING:"data-binding",CHANGE_TITLE:"data-change-title",DATA_FILTERS:"data-filters"},t.prototype.CssClasses_={ACTIVE:"slds-is-active",HIDE:"slds-hide",ITEM:"fielosf-list__item",LINK:"fielosf-link",PAGINATOR:"fielosf-paginator",TITLE:"fielosf-filter__title"},t.prototype.setDefaults_=function(){this.title_=this.element_.querySelector("."+this.CssClasses_.TITLE)||null,null!==this.title_&&(this.activeTitle_=this.element_.querySelector("."+this.CssClasses_.HIDE+"."+this.CssClasses_.ITEM+"["+this.Constant_.CHANGE_TITLE+"]")||!1),this.items_=this.element_.querySelectorAll("."+this.CssClasses_.ITEM+" ."+this.CssClasses_.LINK),this.itemActive_=this.element_.querySelector("."+this.CssClasses_.ITEM+"."+this.CssClasses_.ACTIVE)||!1,this.dataBinding_=this.element_.getAttribute(this.Constant_.BINDING)||null,this.filters_={},this.bindWithPaginators_(),this.setupItems_(),this.callback=function(){}},t.prototype.bindWithPaginators_=function(){this.dataBinding_?this.listOfPaginators_=document.querySelectorAll("."+this.CssClasses_.PAGINATOR+"["+this.Constant_.BINDING+"="+this.dataBinding_+"]"):this.listOfPaginators_=document.getElementsByClassName(this.CssClasses_.PAGINATOR)},t.prototype.cleanActiveCss_=function(){this.itemActive_&&this.itemActive_.classList.remove(this.CssClasses_.ACTIVE)},t.prototype.checkIfItemIsAlreadyActive_=function(t){t.classList.contains(this.CssClasses_.ACTIVE)?this.clickedOnSameItem_=!0:this.clickedOnSameItem_=!1},t.prototype.activeItem_=function(t){this.checkIfItemIsAlreadyActive_(t),this.clickedOnSameItem_||(this.cleanActiveCss_(),this.itemActive_=t,this.itemActive_.classList.add(this.CssClasses_.ACTIVE))},t.prototype.updateTitle=function(t){this.activeTitle_.classList.remove(this.CssClasses_.HIDE),this.title_.textContent=String(t.textContent).trim(),this.activeTitle_=t,this.activeTitle_.classList.add(this.CssClasses_.HIDE)},t.prototype.clearFilter_=function(){for(var t in this.filters_)this.filters_.hasOwnProperty(t)&&(this.filters_[t]=null)},t.prototype.itemClickListener_=function(t){t.preventDefault();var e=fielo.util.getParentUntil(t.currentTarget,"."+this.CssClasses_.ITEM);this.filters_=JSON.parse(t.currentTarget.getAttribute(this.Constant_.DATA_FILTERS)),this.activeItem_(e),null!==this.title_&&e.hasAttribute(this.Constant_.CHANGE_TITLE)&&this.updateTitle(e),this.clickedOnSameItem_||[].forEach.call(this.listOfPaginators_,function(t){t.FieloPaginator.setFilters(this.filters_),t.FieloPaginator.setPage(),t.FieloPaginator.getRecords()},this),this.callback()},t.prototype.setupItems_=function(){[].forEach.call(this.items_,function(t){t.addEventListener("click",this.itemClickListener_.bind(this))},this)},t.prototype.init=function(){this.element_&&this.setDefaults_()},fielo.helper.register({constructor:t,classAsString:"FieloFilter",cssClass:"fielosf-filter"})}(),function(){"use strict";var t=function(t){this.element_=t,this.init()};window.FieloForm=t,t.prototype.Constant_={DEFAULT:"data-default-value",FIELD_NAME:"data-field-name",FIELDS:"data-fields",OBJECT_NAME:"data-object-name",RECORD_ID:"data-record-id",REDIRECT:"data-redirect",RETRIEVE_CONTROLLER:"data-retrieve-controller",SAVE_CONTROLLER:"data-save-controller",SECONDARY_FIELDS:"data-secondary-parameters",SOBJECT_TYPE:"data-sobject-type",TYPE:"data-type"},t.prototype.CssClasses_={CONTAINER:"slds-form-element",ELEMENTS:"slds-form-element",ERROR:"slds-has-error",HEADER:"slds-modal__header",HIDE:"slds-hide",INPUT:"slds-input",NOTIFY:"slds-notify",NOTIFY_CONTAINER:"slds-notify_container",SAVE:"slds-form__save"},t.prototype.setDefaults_=function(){this.data_={},this.secondaryData_={},this.fields_=this.element_.getAttribute(this.Constant_.FIELDS).replace(/ /g,"").split(","),this.header_=this.element_.getElementsByClassName(this.CssClasses_.HEADER)[0]||null,this.elements_=[],[].forEach.call(this.element_.getElementsByClassName(this.CssClasses_.CONTAINER),function(t){componentHandler.upgradeElement(t),this.elements_[t.FieloFormElement.get("fieldName")]=t},this),this.saveButton_=this.element_.getElementsByClassName(this.CssClasses_.SAVE)[0]||null,this.saveButton_&&(this.saveButton_.addEventListener("click",this.saveHandler_.bind(this)),this.saveButton_=this.saveButton_.FieloButton),this.recordId_=null,this.saveController_=this.element_.getAttribute(this.Constant_.SAVE_CONTROLLER),this.retrieveController_=this.element_.getAttribute(this.Constant_.RETRIEVE_CONTROLLER),this.secondaryFields_=this.element_.getAttribute(this.Constant_.SECONDARY_FIELDS)||null,this.secondaryFields_&&(this.secondaryFields_=this.secondaryFields_.split(",")),this.isEditing=!1,this.redirect_=this.element_.getAttribute(this.Constant_.REDIRECT),this.sObjectType_=this.element_.querySelector("["+this.Constant_.SOBJECT_TYPE+"]"),this.sObjectType_&&(this.sObjectType_=this.sObjectType_.getAttribute(this.Constant_.SOBJECT_TYPE)),location.hash&&location.hash.split("#")[1]===this.element_.id&&(this.clear_(),$(this.element_).modal("show"))},t.prototype.getValues_=function(){this.nullFields_=[],$.extend(this.data_,this.parameters_);for(var t in this.elements_)if(this.elements_.hasOwnProperty(t)&&""!==this.elements_[t].FieloFormElement.get("fieldName")){var e=this.elements_[t].FieloFormElement.get("value");"undefined"!=typeof this.elements_[t].FieloFormElement.get("fieldName")&&""!==this.elements_[t].FieloFormElement.get("fieldName")&&(this.secondaryFields_&&this.contains_(this.secondaryFields_,t)||(""===e||null===e?this.nullFields_.push(this.elements_[t].FieloFormElement.get("fieldName")):this.data_[this.elements_[t].FieloFormElement.get("fieldName")]=e))}this.secondaryFields_&&this.secondaryFields_.forEach(function(t){this.elements_[t]?this.secondaryData_[this.elements_[t].FieloFormElement.get("fieldName")]=this.elements_[t].FieloFormElement.get("value"):this.secondaryData_[t]=null},this)},t.prototype.contains_=function(t,e){for(var s=0;s<t.length;s++)if(t[s]===e)return!0;return!1},t.prototype.processRemoteActionResult_=function(t,e){fielo.util.spinner.FieloSpinner.hide();var s=fielo.util.notify.create();t||e.status||(s.FieloNotify.addMessages([BackEndJSSettings.LABELS.ReviewFollowingErrors,e.message]),s.FieloNotify.setTheme("error"),s.FieloNotify.show());try{for(var i=this.header_.getElementsByClassName(this.CssClasses_.NOTIFY);i.length>0;)i[0].FieloNotify.hide();for(var n in this.elements_)this.elements_.hasOwnProperty(n)&&this.elements_[n].FieloFormElement.clean();if(e.status&&void 0!==t){var a=!1;"undefined"!=typeof t.messages&&t.messages.forEach(function(t){"error"!==t.severity.toLowerCase()&&"fatal"!==t.severity.toLowerCase()||(a=!0)});var o=[];a||s.FieloNotify.setTheme("success");var r={"&gt;":">","&lt;":"<","&amp;":"&","&quot;":'"'};if(t.messages.forEach(function(t){var e=t.summary;for(var s in r)if(r.hasOwnProperty(s)){var i=new RegExp(s,"g");e=e.replace(i,r[s])}void 0===t.componentId?o.push(e):this.elements_.hasOwnProperty(t.componentId)?this.elements_[t.componentId].FieloFormElement.setErrorMessage(e):o.push(e)},this),!a)return s.FieloNotify.addMessages(o),s.FieloNotify.show(),$(this.element_).modal("dismiss"),fielo.util.spinner.FieloSpinner.hide(),"true"===this.redirect_&&""!==t.redirectURL&&void 0!==t.redirectURL&&("reload"===t.redirectURL?location.reload():location.replace(t.redirectURL)),this.callback(),!1;s=fielo.util.notify.create(),s.FieloNotify.addMessages([BackEndJSSettings.LABELS.ReviewFollowingErrors]),s.FieloNotify.setTheme("error"),s.FieloNotify.show(this.header_,!1),o.length>0&&(s=fielo.util.notify.create(),s.FieloNotify.addMessages([o]),s.FieloNotify.setTheme("offline"),s.FieloNotify.show(this.header_,!1)),o.length=0}else s.FieloNotify.addMessages([BackEndJSSettings.LABELS.ReviewFollowingErrors,e.message]),s.FieloNotify.setTheme("error"),s.FieloNotify.show()}catch(l){s.FieloNotify.addMessages([BackEndJSSettings.LABELS.ReviewFollowingErrors,l]),s.FieloNotify.setTheme("error"),s.FieloNotify.show()}fielo.util.spinner.FieloSpinner.hide(),t&&(t.redirectURL&&"reload"===t.redirectURL?location.reload():""!==t.redirectURL&&void 0!==t.redirectURL&&location.replace(t.redirectURL))},t.prototype.callback=function(t){console.log(t)},t.prototype.saveHandler_=function(){this.saveButton_.wasConfirmed&&this.save_()},t.prototype.checkRequiredPassOk_=function(){this.requiredFailedElements_=[];var t=!1;for(var e in this.elements_)this.elements_.hasOwnProperty(e)&&this.elements_[e].FieloFormElement.required_&&(null===this.elements_[e].FieloFormElement.get("value")||""===this.elements_[e].FieloFormElement.get("value"))&&(this.requiredFailedElements_.push(this.elements_[e]),this.elements_[e].FieloFormElement.setErrorMessage(),t=!0);return!t},t.prototype.save_=function(){fielo.util.spinner.FieloSpinner.show();var t;if(this.getValues_(),this.recordId_?this.data_.Id=this.recordId_:this.sObjectType_&&""!==this.sObjectType_&&(this.data_.sObjectType=this.sObjectType_),this.data_.cloneId&&delete this.data_.cloneId,this.checkRequiredPassOk_()){var e=[];e.push(this.saveController_),e.push(this.data_),e.push(this.nullFields_);for(var s in this.secondaryData_)this.secondaryData_.hasOwnProperty(s)&&e.push(this.secondaryData_[s]);e.push(this.processRemoteActionResult_.bind(this)),e.push({escape:!0});try{Visualforce.remoting.Manager.invokeAction.apply(Visualforce.remoting.Manager,e)}catch(i){t=fielo.util.notify.create(),t.FieloNotify.addMessages([BackEndJSSettings.LABELS.ReviewFollowingErrors,i]),t.FieloNotify.setTheme("error"),t.FieloNotify.show(),fielo.util.spinner.FieloSpinner.hide()}}else t=fielo.util.notify.create(),t.FieloNotify.addMessages([BackEndJSSettings.LABELS.CompleteRequiredFields]),t.FieloNotify.setTheme("error"),t.FieloNotify.show(),fielo.util.spinner.FieloSpinner.hide()},t.prototype.clear_=function(){for(var t=this.header_.getElementsByClassName(this.CssClasses_.NOTIFY);t.length>0;)t[0].FieloNotify.hide();var e=this.element_.getElementsByClassName(this.CssClasses_.ELEMENTS);[].forEach.call(e,function(t){var e=t.getAttribute(this.Constant_.DEFAULT);""===e?(t.FieloFormElement.clear(),t.classList.remove(this.CssClasses_.ERROR)):t.FieloFormElement.set("value",e)},this);for(var s=0;s<e.length;s++){var i=e[s].FieloFormElement.get("type");if("lookup"===i||i.indexOf("input")!==-1){var n=e[s].getAttribute(this.Constant_.DEFAULT);""===n?e[s].FieloFormElement.clear():e[s].FieloFormElement.set("value",n);break}}},t.prototype.setParameters_=function(){for(var t in this.parameters_)this.parameters_.hasOwnProperty(t)&&this.elements_.hasOwnProperty(t)&&this.elements_[t].FieloFormElement.set("value",this.parameters_[t])},t.prototype.retrieve_=function(t){if(this.parameters_=t.FieloButton.getParameters(),this.setParameters_(),this.parameters_.hasOwnProperty("Id")||this.parameters_.hasOwnProperty("cloneId")){this.isEditing=!0,this.recordId_=this.parameters_.Id;var e=this.parameters_.Id||this.parameters_.cloneId,s=this.element_.getAttribute(this.Constant_.FIELDS),i=this.element_.getAttribute(this.Constant_.OBJECT_NAME);Visualforce.remoting.Manager.invokeAction(this.retrieveController_,i,e,s,this.retrieveHandler_.bind(this),{escape:!1})}else this.isEditing=!1,this.setParameters_(),this.endRetrieve()},t.prototype.retrieveProxy_=function(t,e){t.FieloForm.clear_(),t.FieloForm.retrieve_(e)},window.FieloForm_retrieve=t.prototype.retrieveProxy_,t.prototype.retrieveHandler_=function(t){fielo.util.spinner.FieloSpinner.show(),this.result=t;try{var e="|";for(var s in t)t.hasOwnProperty(s)&&s.indexOf("__r")>-1&&(e+=s.slice(0,-1)+"c|");this.fields_.forEach(function(s){if(e.indexOf(s)>-1){var i;switch(typeof t[s.slice(0,-1)+"r"]){case"object":i=t[s.slice(0,-1)+"r"];var n;for(var a in i)if(i.hasOwnProperty(a)&&a.indexOf("__c")>-1){n=a;break}i=n?i[n].split(";"):t[s];break;case"array":default:i=t[s.slice(0,-1)+"r"]}this.elements_[s].FieloFormElement.set("value",i)}else this.elements_[s]&&("input-date"===this.elements_[s].FieloFormElement.get("type")&&(t[s]=fielo.util.parseDateFromSF(t[s])),this.elements_[s].FieloFormElement.set("value",t[s]))},this),this.setParameters_(),this.endRetrieve()}catch(i){var n=fielo.util.notify.create();n.FieloNotify.addMessages([BackEndJSSettings.LABELS.ReviewFollowingErrors,i]),n.FieloNotify.setTheme("error"),n.FieloNotify.show()}for(var a=this.element_.getElementsByClassName(this.CssClasses_.ELEMENTS),o=0;o<a.length;o++){var r=a[o].FieloFormElement.get("type");if("lookup"===r||r.indexOf("input")!==-1){a[o].getElementsByClassName(this.CssClasses_.INPUT)[0].focus();break}}fielo.util.spinner.FieloSpinner.hide()},t.prototype.init=function(){this.element_&&(this.endRetrieve=function(){},this.setDefaults_())},fielo.helper.register({constructor:t,classAsString:"FieloForm",cssClass:"slds-form",widget:!0})}(),function(){"use strict";var t=function(t){this.element_=t,this.init()};window.FieloRecentRecords=t,t.prototype.Constant_={ACTION:"data-action",ASYNC:"data-async",FIELD:"data-field",NAME:"data-name",RECORD_ID:"data-record-id",SHOW:"data-aljs-show",TYPE:"data-type",UPGRADED:"data-upgraded"},t.prototype.CssClasses_={BUTTON:"slds-button",CHECKBOXALL:"fielosf-recent-records-checkboxall",CHECKBOXES:"fielosf-recent-records-checkbox",COLUMN:"fielosf--col-model",CONTAINER:"fielosf-recent-records__container",DELETE:"delete-field",HEADER:"fielosf-recent-records__header",HIDE:"slds-hide",MODEL:"fielosf-recent-records__model",OUTPUT:"fielosf-output",PAGINATOR:"fielosf-paginator",ROW:"fielosf-recent-records__row",SLDS_HEADER:"fielosf-header"},t.prototype.renderRecords_=function(t){var e=0;if(this.model_){var s=this.model_.getElementsByClassName(this.CssClasses_.COLUMN)[0],i=this.model_.cloneNode(!0),n=this.element_.getElementsByClassName(this.CssClasses_.HEADER)[0],a=n.getElementsByClassName(this.CssClasses_.COLUMN)[0];for(var o in this.extraFields_)if(this.extraFields_.hasOwnProperty(o)){var r=s.cloneNode(!0);r.getElementsByClassName(this.CssClasses_.OUTPUT)[0].setAttribute(this.Constant_.FIELD,o),i.appendChild(r);var l=a.cloneNode(!0);l.classList.add(this.CssClasses_.DELETE),l.getElementsByClassName(this.CssClasses_.OUTPUT)[0].innerHTML=this.extraFields_[o],n.getElementsByClassName(this.CssClasses_.ROW)[0].appendChild(l)}var h=this.element_.getElementsByClassName(this.CssClasses_.CONTAINER)[0]||null;h.innerHTML="",t.forEach(function(t){var s=i.cloneNode(!0);s.classList.remove(this.CssClasses_.HIDE),s.setAttribute(this.Constant_.RECORD_ID,t.Id);var n=s.getElementsByClassName(this.CssClasses_.OUTPUT);[].forEach.call(n,function(e){var s,i=e.getAttribute(this.Constant_.FIELD).split("."),n=i.length>1;switch(n&&(s=i.slice(),s[i.length-1]="Id"),e.innerHTML=fielo.util.getObjectValue(t,i),e.getAttribute(this.Constant_.TYPE).toLowerCase()){case"link":case"reference":n?e.setAttribute("href","/"+fielo.util.getObjectValue(t,s)):e.setAttribute("href","/"+t.Id)}},this),[].forEach.call(s.querySelectorAll("["+this.Constant_.UPGRADED+"]"),function(t){t.removeAttribute(this.Constant_.UPGRADED),componentHandler.upgradeElement(t)},this),[].forEach.call(s.getElementsByClassName(this.CssClasses_.CHECKBOXES),function(t){t.FieloFormElement.set("checkboxBinding",e),e++}),h.appendChild(s)},this)}fielo.util.spinner.FieloSpinner.hide()},t.prototype.reload_=function(){this.paginator_.FieloPaginator.setPage(),this.paginator_.FieloPaginator.getRecords()},t.prototype.bindHeaderActionsCallbacks_=function(){[].forEach.call(document.querySelectorAll("."+this.CssClasses_.SLDS_HEADER+" ."+this.CssClasses_.BUTTON+"["+this.Constant_.ACTION+"]"),function(t){!t.FieloButton.type_||"Remote"!==t.FieloButton.type_&&"RemoteList"!==t.FieloButton.type_?"Modal"===t.FieloButton.type_&&(document.getElementById(t.getAttribute(this.Constant_.SHOW)).FieloForm.callback=this.reload_.bind(this)):t.FieloButton.callback=this.reload_.bind(this)},this)},t.prototype.checkOrUncheckAll_=function(){for(var t=0;t<this.checkboxes_.length;t++)this.checkboxes_[t].FieloFormElement.set("value",this.selectAllCheckbox_.FieloFormElement.get("value"))},t.prototype.uncheckAll=function(){for(var t=0;t<this.checkboxes_.length;t++)this.checkboxes_[t].FieloFormElement.set("value","false");this.selectAllCheckbox_.FieloFormElement.set("value","false")},t.prototype.addExtraField=function(t,e){this.extraFields_[t]=e},t.prototype.cleanExtraFields=function(){this.extraFields_={};var t=this.element_.querySelectorAll("."+this.CssClasses_.HEADER+" ."+this.CssClasses_.DELETE);[].forEach.call(t,function(t){t.remove()})},t.prototype.getChecked=function(){for(var t=[],e=[],s=[],i=0;i<this.checkboxes_.length;i++)e=this.checkboxes_[i].FieloFormElement.get("value"),e&&(t=$(this.checkboxes_[i]).closest("."+this.CssClasses_.ROW)[0].getAttribute(this.Constant_.RECORD_ID),s.push(t));return s},t.prototype.getPaginator=function(){return this.paginator_},t.prototype.init=function(){this.element_&&(componentHandler.upgradeElements(this.element_.getElementsByClassName(this.CssClasses_.OUTPUT)),this.model_=this.element_.getElementsByClassName(this.CssClasses_.MODEL)[0].cloneNode(!0)||null,this.extraFields_={},this.paginator_=this.element_.getElementsByClassName(this.CssClasses_.PAGINATOR)[0],this.paginator_.FieloPaginator.callback=this.renderRecords_.bind(this),this.async_=this.element_.getAttribute(this.Constant_.ASYNC),"true"===this.async_&&(this.paginator_.FieloPaginator.setPage(),this.paginator_.FieloPaginator.getRecords()),this.selectAllCheckbox_=this.element_.getElementsByClassName(this.CssClasses_.CHECKBOXALL)[0],this.checkboxes_=this.element_.getElementsByClassName(this.CssClasses_.CHECKBOXES),this.selectAllCheckbox_&&this.selectAllCheckbox_.addEventListener("change",this.checkOrUncheckAll_.bind(this)),this.bindHeaderActionsCallbacks_())},fielo.helper.register({constructor:t,classAsString:"FieloRecentRecords",cssClass:"fielosf-recent-records",widget:!0})}(),function(){"use strict";var t=function(t){this.element_=t,this.init()};window.FieloRelatedRecords=t,t.prototype.Constant_={ACTION:"data-action",ASYNC:"data-async",FIELD:"data-field",MODEL:".slds-table tbody",NAME:"data-name",PARAMETERS:"data-parameters",RECORD_ID:"data-record-id",SHOW:"data-aljs-show",TYPE:"data-type",UPGRADED:"data-upgraded",QTY_CONTROLLER:"FieloPLT.RelatedListController.getRecordsQty"},t.prototype.CssClasses_={BUTTON:"slds-button",CONTAINER:"fielosf-related-records__container",OUTPUT:"fielosf-output",HIDE:"slds-hide",MODEL:"fielosf-related-records__model",PAGINATOR:"fielosf-paginator",SIZE:"fielosf-related-records__size",ELEMENT:"slds-form-element"},t.prototype.renderRecords_=function(t){if(this.model_){var e=this.element_.getElementsByClassName(this.CssClasses_.CONTAINER)[0]||null;e.innerHTML="",t.forEach(function(t){var s=this.model_.cloneNode(!0);s.classList.remove(this.CssClasses_.HIDE),[].forEach.call(s.getElementsByClassName(this.CssClasses_.OUTPUT),function(e){var s,i=e.getAttribute(this.Constant_.FIELD).split("."),n=i.length>1;switch(n&&(s=i.slice(),s[i.length-1]="Id"),e.removeAttribute("data-upgraded"),componentHandler.upgradeElement(e),e.FieloOutput.set(fielo.util.getObjectValue(t,i)),e.getAttribute(this.Constant_.TYPE).toLowerCase()){case"link":case"reference":n?e.setAttribute("href","/"+fielo.util.getObjectValue(t,s)):e.setAttribute("href","/"+t.Id);break;case"action":[].forEach.call(e.getElementsByClassName(this.CssClasses_.BUTTON),function(){},this)}},this),[].forEach.call(s.getElementsByClassName("slds-button"),function(e){e.setAttribute("data-record",JSON.stringify(t))},this),[].forEach.call(s.querySelectorAll("["+this.Constant_.UPGRADED+"]"),function(e){e.removeAttribute(this.Constant_.UPGRADED),null!==e.getAttribute(this.Constant_.RECORD_ID)&&e.setAttribute(this.Constant_.RECORD_ID,t.Id);var s=e.getAttribute(this.Constant_.PARAMETERS);null!==s&&(s=""===s?{}:JSON.parse(s),s.Id=t.Id,s=JSON.stringify(s),e.setAttribute(this.Constant_.PARAMETERS,s)),componentHandler.upgradeElement(e)},this),s.classList.remove(this.CssClasses_.HIDE),e.appendChild(s)},this)}this.bindActionsCallbacks_(),this.renderCallback_(),fielo.util.spinner.FieloSpinner.hide()},t.prototype.renderCallback_=function(){},t.prototype.reload_=function(){this.paginator_.FieloPaginator.setPage(),this.paginator_.FieloPaginator.getRecords(),this.callbacks_.length>0&&this.callbacks_.forEach(function(t){t()})},t.prototype.bindActionsCallbacks_=function(){[].forEach.call(this.element_.querySelectorAll("."+this.CssClasses_.BUTTON+"["+this.Constant_.ACTION+"]"),function(t){if("true"===this.async_){var e=t.getAttribute("data-vis-field"),s=t.getAttribute("data-vis-value");if(e&&s){var i=JSON.parse(t.getAttribute("data-record")||"{}");i[e]&&i[e]!==s&&(t.classList.add("slds-hide"),t.classList.add("page-settings-btn"))}}!t.FieloButton.type_||"Remote"!==t.FieloButton.type_&&"RemoteList"!==t.FieloButton.type_?"Modal"===t.FieloButton.type_&&(document.getElementById(t.getAttribute(this.Constant_.SHOW)).FieloForm.callback=this.reload_.bind(this)):t.FieloButton.callback=this.reload_.bind(this)},this)},t.prototype.registerCallback=function(t){this.callbacks_.push(t)},t.prototype.setQuantityRecords=function(t){console.log(t)},t.prototype.init=function(){this.element_&&(componentHandler.upgradeElements(this.element_.getElementsByClassName(this.CssClasses_.OUTPUT)),this.model_=this.element_.getElementsByClassName(this.CssClasses_.MODEL)[0].cloneNode(!0)||null,this.paginator_=this.element_.getElementsByClassName(this.CssClasses_.PAGINATOR)[0],this.paginator_.FieloPaginator.callback=this.renderRecords_.bind(this),this.async_=this.element_.getAttribute(this.Constant_.ASYNC),"true"===this.async_&&(this.paginator_.FieloPaginator.setPage(),this.paginator_.FieloPaginator.getRecords()),this.sizeCount_=this.element_.getElementsByClassName(this.CssClasses_.SIZE)[0]||null,this.bindActionsCallbacks_(),this.callbacks_=[])},fielo.helper.register({constructor:t,classAsString:"FieloRelatedRecords",cssClass:"fielosf-related-records",widget:!0})}(),function(){"use strict";var t=function(t){this.element_=t,this.init()};window.FieloPhotoUpload=t,t.prototype.Constant_={DATA_EXTERNAL_URL_NAME:"data-external-url-name",DATA_FIELD_NAME:"data-field-name",DATA_FOLDER_ID:"data-folder-id",DATA_RECORD:"data-record",DATA_RECORD_NAME:"data-record-name",DATA_SOBJECT_NAME:"data-sobject-name",DATA_INSTANCE:"data-instance",DATA_DOCUMENT:"data-document-id",DATA_RELOAD:"data-reload",DATA_VALUE:"data-value",DELETE_CONTROLLER:"."===BackEndJSSettings.RESOURCE.NAMESPACE?"PhotoUploadController.remove":BackEndJSSettings.RESOURCE.NAMESPACE+"PhotoUploadController.remove",SAVE_CONTROLLER:"."===BackEndJSSettings.RESOURCE.NAMESPACE?"PhotoUploadController.save":BackEndJSSettings.RESOURCE.NAMESPACE+"PhotoUploadController.save"},t.prototype.CssClasses_={CANCEL:"slds-button--cancel",CONTAINER:"fielosf-recent-records__container",
CROPPER:"fielosf-cropper",DELETE:"slds-button--delete",DOCUMENT:"slds-button--document",DOCUMENT_PICKLIST:"fielosf-document-picklist",EDIT:"slds-button--edit",EXTERNAL_BTN:"slds-button--url",EXTERNAL_INPUT:"fielosf-external-url",EXTERNAL_LINK:"fielosf-external-link",EXTERNAL_LINK_LABEL:"fielosf-external-link-label",FIELD:"fielosf-output",HIDE:"slds-hide",IMAGE:"",INPUT_FILE:"fielosf-input-file",MODEL:"fielosf-recent-records__model",PREVIEW:"slds-button--preview",RECORD_IMG:"fielosf-recordImg",REPLACE:"slds-button--replace",SAVE:"slds-button--save",UPLOAD_BTN:"slds-button--upload"},t.prototype.handleClickOnSave_=function(){fielo.util.spinner.FieloSpinner.show();var t="",e="",s={};s.Id=this.record_,s.Name=this.recordName_,this.isExternal_&&(t="external",s[this.dataExternalURL_]=this.externalUrlInput_.value,s[this.fieldName_]=""),this.isDocument_&&(t="internal",e=$(this.imEditing_?this.recordImg_:this.cropperImage_).cropper("getCroppedCanvas").toDataURL(this.imageType_),this.externalUrlInput_.value="",s[this.dataExternalURL_]="");try{Visualforce.remoting.Manager.invokeAction(this.Constant_.SAVE_CONTROLLER,s,this.folderId_,this.objectName_,this.fieldName_,this.dataExternalURL_,t,e,this.instance_,this.processSavesAndDelete_.bind(this),{escape:!1})}catch(i){console.warn(i)}},t.prototype.deleteFile_=function(){fielo.util.spinner.FieloSpinner.show(),this.isAction_("deleting");var t={};t.Id=this.record_;try{Visualforce.remoting.Manager.invokeAction(this.Constant_.DELETE_CONTROLLER,t,this.fieldName_,this.dataExternalURL_,this.processSavesAndDelete_.bind(this),{escape:!1})}catch(e){this.isAction_(),console.warn(e)}},t.prototype.setDocumentId_=function(t){this.documentId_=t,this.element_.setAttribute(this.Constant_.DATA_DOCUMENT,t)},t.prototype.processSavesAndDelete_=function(t){var e=fielo.util.notify.create();e.FieloNotify.addMessages([t.messages[0].summary]);var s="Error"===t.messages[0].severity?"Error":"Success";e.FieloNotify.setTheme(s),e.FieloNotify.show(),"Error"!==s&&this.reload_&&this.refresh_(),this.setDocumentId_(t.recordsId[0]||"");var i;this.isDocument_&&!this.imDeleting_&&(i=this.imEditing_?this.recordImg_:this.cropperImage_,this.recordImg_.src=$(i).cropper("getCroppedCanvas").toDataURL(this.imageType_),this.destroyCropper_(this.recordImg_)),this.externalLink_.innerText=t.redirectURL,this.isExternal_&&(this.externalLink_.innerText=this.externalUrlInput_.value,this.externalLink_.setAttribute(this.Constant_.DATA_VALUE,this.externalUrlInput_.value),this.recordImg_.src=this.externalUrlInput_.value),this.imDeleting_?(this.recordImg_.src="",this.externalUrlInput_.value="",this.setDocumentId_(),this.isStep_("new")):this.isOld_=!0,this.fileImage_.value="",this.isAction_(),this.showElements_(),fielo.util.spinner.FieloSpinner.hide()},t.prototype.refresh_=function(){location.reload()},t.prototype.initCropper_=function(t){var e=$(t).width(),s=$(t).height();e<=200&&(s=Math.floor(300*s/e),e=300),s<=100&&(e=Math.floor(200*e/s),s=200),$(t).cropper({rotatable:!1,zoomable:!1,movable:!1,scalable:!1,minContainerWidth:e,minContainerHeight:s,autoCropArea:1,viewMode:3,ready:function(){var t=this.element_.getElementsByClassName("cropper-container")[0];t&&t.classList.add("slds-m-top--large")}.bind(this)})},t.prototype.destroyCropper_=function(t){$(t).cropper("destroy"),this.cropperImage_.src=""},t.prototype.loadImage_=function(){this.destroyCropper_(this.cropperImage_),this.showElements_(),this.fileImage_.files[0]&&(this.cropperImage_.src=URL.createObjectURL(this.fileImage_.files[0]),this.imageType_=this.fileImage_.files[0].type,this.cropperImage_.addEventListener("load",this.initCropper_.bind(this,this.cropperImage_)))},t.prototype.previewImage_=function(){var t=window.open();if(this.isExternal_)t.document.body.innerHTML='<img class="fielosf-js-photoupload__imagePreview" src="'+this.externalUrlInput_.value+'" />';else{var e=this.imEditing_?this.recordImg_:this.cropperImage_;t.document.body.append($(e).cropper("getCroppedCanvas"))}},t.prototype.handleClickOnExternalUrl_=function(){this.isAction_("uploading"),this.isStep_("external"),this.showElements_()},t.prototype.handleClickOnCancel_=function(){this.imUploading_&&(this.isDocument_&&(this.fileImage_.value="",this.destroyCropper_(this.cropperImage_)),this.isExternal_&&(this.externalUrlInput_.value=""),this.isNew_?this.isStep_("new"):""===this.documentId_?this.isStep_("external"):this.isStep_("document")),this.imEditing_&&this.destroyCropper_(this.recordImg_),this.isAction_(),this.showElements_()},t.prototype.handleClickOnUpload_=function(){this.isAction_("uploading"),this.isStep_("document"),this.fileImage_.click()},t.prototype.handleClickOnEdit_=function(){this.isAction_("editing"),this.initCropper_(this.recordImg_),this.showElements_()},t.prototype.handleClickOnReplace_=function(){this.isAction_("replacing"),this.showElements_()},t.prototype.setListeners_=function(){this.upload_.addEventListener("click",this.handleClickOnUpload_.bind(this)),this.external_.addEventListener("click",this.handleClickOnExternalUrl_.bind(this)),this.preview_.addEventListener("click",this.previewImage_.bind(this)),this.replace_.addEventListener("click",this.handleClickOnReplace_.bind(this)),this.documentPicklist_&&this.document_.addEventListener("click",function(){this.showElements_(),this.documentPicklist_.classList.remove(this.CssClasses_.HIDE)}.bind(this)),this.edit_.addEventListener("click",this.handleClickOnEdit_.bind(this)),this.save_.addEventListener("click",this.handleClickOnSave_.bind(this)),this.delete_.addEventListener("click",this.deleteFile_.bind(this)),this.cancel_.addEventListener("click",this.handleClickOnCancel_.bind(this)),this.fileImage_.addEventListener("change",this.loadImage_.bind(this)),this.externalUrlInput_.addEventListener("keypress",function(t){var e=t.which||t.keyCode;13===e&&this.save_.click()}.bind(this))},t.prototype.initData_=function(){this.record_=this.element_.getAttribute(this.Constant_.DATA_RECORD),this.recordName_=this.element_.getAttribute(this.Constant_.DATA_RECORD_NAME),this.objectName_=this.element_.getAttribute(this.Constant_.DATA_SOBJECT_NAME),this.folderId_=this.element_.getAttribute(this.Constant_.DATA_FOLDER_ID),this.fieldName_=this.element_.getAttribute(this.Constant_.DATA_FIELD_NAME),this.dataExternalURL_=this.element_.getAttribute(this.Constant_.DATA_EXTERNAL_URL_NAME),this.instance_=this.element_.getAttribute(this.Constant_.DATA_INSTANCE),this.setDocumentId_(this.element_.getAttribute(this.Constant_.DATA_DOCUMENT)||""),"true"===this.element_.getAttribute(this.Constant_.DATA_RELOAD)?this.reload_=!0:this.reload_=!1},t.prototype.initExternalElements_=function(){this.externalUrlInput_=this.element_.getElementsByClassName(this.CssClasses_.EXTERNAL_INPUT)[0],this.externalLinkLabel_=this.element_.getElementsByClassName(this.CssClasses_.EXTERNAL_LINK_LABEL)[0],this.externalLink_=this.element_.getElementsByClassName(this.CssClasses_.EXTERNAL_LINK)[0]||null,""!==this.externalLink_.getAttribute(this.Constant_.DATA_VALUE)&&(this.externalLink_.innerText=this.externalLink_.getAttribute(this.Constant_.DATA_VALUE))},t.prototype.initActions_=function(){this.isAction_()},t.prototype.initImages_=function(){this.newImage_=this.element_.getElementsByClassName(this.CssClasses_.IMAGE)[0],this.fileImage_=this.element_.getElementsByClassName(this.CssClasses_.INPUT_FILE)[0],this.cropperImage_=this.element_.getElementsByClassName(this.CssClasses_.CROPPER)[0],this.recordImg_=this.element_.getElementsByClassName(this.CssClasses_.RECORD_IMG)[0]},t.prototype.isStep_=function(t){switch(t=t||"",this.isNew_=!1,this.isDocument_=!1,this.isExternal_=!1,t.toLowerCase()){case"new":this.isNew_=!0,this.isOld_=!1;break;case"document":this.isDocument_=!0;break;case"external":this.isExternal_=!0}},t.prototype.initSteps_=function(){this.isOld_=!0,this.isStep_(),""===this.recordImg_.getAttribute("src")&&""===this.externalLink_.getAttribute(this.Constant_.DATA_VALUE)&&this.isStep_("new"),""!==this.documentId_&&this.isStep_("document"),""===this.recordImg_.getAttribute("src")||this.isDocument_||this.isStep_("external")},t.prototype.isAction_=function(t){switch(t=t||"",this.imUploading_=!1,this.imDeleting_=!1,this.imEditing_=!1,this.imReplacing_=!1,t.toLowerCase()){case"uploading":this.imUploading_=!0;break;case"deleting":this.imDeleting_=!0;break;case"editing":this.imEditing_=!0;break;case"replacing":this.imReplacing_=!0}},t.prototype.initButtons_=function(){this.upload_=this.element_.getElementsByClassName(this.CssClasses_.UPLOAD_BTN)[0],this.external_=this.element_.getElementsByClassName(this.CssClasses_.EXTERNAL_BTN)[0],this.preview_=this.element_.getElementsByClassName(this.CssClasses_.PREVIEW)[0],this.cancel_=this.element_.getElementsByClassName(this.CssClasses_.CANCEL)[0],this.replace_=this.element_.getElementsByClassName(this.CssClasses_.REPLACE)[0],this.document_=this.element_.getElementsByClassName(this.CssClasses_.DOCUMENT)[0],this.save_=this.element_.getElementsByClassName(this.CssClasses_.SAVE)[0],this.delete_=this.element_.getElementsByClassName(this.CssClasses_.DELETE)[0],this.edit_=this.element_.getElementsByClassName(this.CssClasses_.EDIT)[0],this.documentPicklist_=this.element_.getElementsByClassName(this.CssClasses_.DOCUMENT_PICKLIST)[0]},t.prototype.hideElements_=function(){this.upload_.classList.add(this.CssClasses_.HIDE),this.external_.classList.add(this.CssClasses_.HIDE),this.replace_.classList.add(this.CssClasses_.HIDE),this.delete_.classList.add(this.CssClasses_.HIDE),this.edit_.classList.add(this.CssClasses_.HIDE),this.preview_.classList.add(this.CssClasses_.HIDE),this.cancel_.classList.add(this.CssClasses_.HIDE),this.save_.classList.add(this.CssClasses_.HIDE),this.documentPicklist_&&this.document_.classList.add(this.CssClasses_.HIDE),this.externalUrlInput_.classList.add(this.CssClasses_.HIDE),this.externalLink_.classList.add(this.CssClasses_.HIDE),this.externalLinkLabel_.classList.add(this.CssClasses_.HIDE),this.recordImg_.classList.add(this.CssClasses_.HIDE)},t.prototype.showElements_=function(){this.hideElements_(),(this.imEditing_||this.imUploading_)&&(this.preview_.classList.remove(this.CssClasses_.HIDE),this.save_.classList.remove(this.CssClasses_.HIDE)),this.isExternal_&&this.imUploading_&&(this.externalUrlInput_.classList.remove(this.CssClasses_.HIDE),this.externalUrlInput_.focus()),this.isNew_||this.imEditing_||this.imReplacing_||this.imUploading_||(this.replace_.classList.remove(this.CssClasses_.HIDE),this.delete_.classList.remove(this.CssClasses_.HIDE),this.externalLinkLabel_.classList.remove(this.CssClasses_.HIDE),this.externalLink_.classList.remove(this.CssClasses_.HIDE),this.recordImg_.classList.remove(this.CssClasses_.HIDE),this.isDocument_&&(this.edit_.classList.remove(this.CssClasses_.HIDE),this.destroyCropper_(this.cropperImage_))),!this.isNew_&&!this.imReplacing_||this.imUploading_||(this.upload_.classList.remove(this.CssClasses_.HIDE),this.external_.classList.remove(this.CssClasses_.HIDE)),(this.imReplacing_||this.imEditing_||this.imUploading_)&&this.cancel_.classList.remove(this.CssClasses_.HIDE)},t.prototype.init=function(){this.element_&&(this.initData_(),this.initImages_(),this.initExternalElements_(),this.initButtons_(),this.initActions_(),this.initSteps_(),this.setListeners_(),this.showElements_())},componentHandler.register({constructor:t,classAsString:"FieloPhotoUpload",cssClass:"fielosf-photo-upload",widget:!0})}();
//# sourceMappingURL=core.min.js.map
